var e=Object.defineProperty,t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,o=(t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s,r=(e,r)=>{for(var i in r||(r={}))n.call(r,i)&&o(e,i,r[i]);if(t)for(var i of t(r))s.call(r,i)&&o(e,i,r[i]);return e};import{R as i,L as a,M as l,S as d,_ as c,k as h,E as m,a as p,h as u,u as f,r as g,b as w,i as k,c as v,d as y,I as b,t as _,w as x,e as E,s as N,f as M,l as C,D as T,g as S,j as A,P,m as O,T as L,N as j,n as R,o as I,p as D,q as $,v as W,x as z,y as V,z as H,A as B,B as F,C as q,F as Y,G as U,H as G,J as K,K as Q,O as X,Q as J,U as Z,V as ee,W as te,X as ne,Y as se,Z as oe,$ as re,a0 as ie,a1 as ae,a2 as le,a3 as de,a4 as ce,a5 as he,a6 as me,a7 as pe,a8 as ue,a9 as fe,aa as ge,ab as we,ac as ke,ad as ve,ae as ye,af as be}from"./vendor.92e4e398.js";var _e="_body_1dmv7_1",xe="_main_1dmv7_10",Ee="_content_1dmv7_22",Ne="_container_1dmv7_32",Me="_title_1dmv7_43",Ce="_desc_1dmv7_52",Te="_logo_1dmv7_60",Se="_buttons_1dmv7_67",Ae="_curve_1dmv7_102";const Pe=()=>i.createElement("section",{className:_e},i.createElement("section",{className:xe},i.createElement("div",{className:Ne},i.createElement("div",{className:Ee},i.createElement("h1",{className:Me},"Milkdown"),i.createElement("p",{className:Ce},"Plugin Based WYSIWYG Markdown Editor"),i.createElement("section",{className:Se},i.createElement(a,{to:"/getting-started"},"Get Started"),i.createElement(a,{to:"/online-demo"},"Online Demo"))),i.createElement("section",{className:Te},i.createElement("img",{src:"/milkdown/milkdown-homepage.svg"})))),i.createElement("div",{className:Ae},i.createElement("svg",{viewBox:"0 0 1152 73"},i.createElement("path",{d:"M99.0331 0.252716C59.2655 0.284556 0 25.2197 0 25.2197V0.252716H99.0331C99.0585 0.252696 99.0839 0.252686 99.1093 0.252686C99.1538 0.252686 99.1982 0.252696 99.2427 0.252716H1152V73C1018.73 21.6667 957.818 24.4226 819.692 22.7693C672.54 21.008 573.085 73 427.919 73C308.414 73 218.068 0.307089 99.2427 0.252716H99.0331Z"}))));var Oe,Le;(Le=Oe||(Oe={}))[Le.Idle=0]="Idle",Le[Le.LoadSchema=1]="LoadSchema",Le[Le.SchemaReady=2]="SchemaReady",Le[Le.LoadPlugin=3]="LoadPlugin",Le[Le.Complete=4]="Complete";class je{constructor(e={}){this.options=e}injectContext(e,t){this.context=e,this.updateContext=t}}class Re extends je{constructor(){super(...arguments),this.loadAfter=Oe.Idle}main(){this.updateContext({marks:this.context.marks.concat(this)})}}class Ie extends je{constructor(){super(...arguments),this.loadAfter=Oe.Idle}main(){this.updateContext({nodes:this.context.nodes.concat(this)})}}function De(e,t,n={}){return e.reduce(((e,n)=>{const[s,o]=t(n);return Object.assign(Object.assign({},e),{[s]:o})}),n)}const $e=e=>e.isText;class We extends je{constructor(){super(...arguments),this.id="schemaLoader",this.loadAfter=Oe.LoadSchema}main(){const e=De(this.context.nodes,(e=>[e.id,e.schema])),t=De(this.context.marks,(e=>[e.id,e.schema])),n=new d({nodes:Object.assign({},e),marks:t});this.updateContext({schema:n})}}var ze,Ve,He;class Be{constructor(e,t,n){this.stack=e,this.schema=t,this.specMap=n,ze.add(this),this.run=(e,t)=>{const n=e.parse(t);return this.next(n),this},this.injectRoot=(e,t,n)=>(this.stack.openNode(t,n),this.next(e.children),this),this.addText=(e="")=>(this.stack.addText((t=>this.schema.text(e,t))),this),this.addNode=(...e)=>(this.stack.addNode(...e),this),this.openNode=(...e)=>(this.stack.openNode(...e),this),this.closeNode=(...e)=>(this.stack.closeNode(...e),this),this.openMark=(...e)=>(this.stack.openMark(...e),this),this.closeMark=(...e)=>(this.stack.closeMark(...e),this),this.toDoc=()=>this.stack.build(),this.next=(e=[])=>(Array.isArray(e)?e.forEach((e=>c(this,ze,"m",He).call(this,e))):c(this,ze,"m",He).call(this,e),this)}}ze=new WeakSet,Ve=function(e){const t=Object.entries(this.specMap).map((([e,t])=>Object.assign({key:e},t))).find((t=>t.match(e)));if(!t)throw new Error;return t},He=function(e){const{key:t,runner:n,is:s}=c(this,ze,"m",Ve).call(this,e);n(this,e,this.schema["node"===s?"nodes":"marks"][t])};const Fe=e=>e.elements.length,qe=e=>e.elements[Fe(e)-1],Ye=e=>(t,n)=>e.elements.push(((e,t,n)=>{const s={type:e,content:t,attrs:n};return Object.assign(Object.assign({},s),{push:(...e)=>((e,t,...n)=>{e.content.push(t,...n)})(s,...e),pop:()=>(e=>e.content.pop())(s)})})(t,[],n)),Ue=e=>(t,n,s)=>{const o=t.createAndFill(n,s,e.marks);if(!o)throw new Error;return(e=>t=>{var n;return null===(n=qe(e))||void 0===n?void 0:n.push(t)})(e)(o),o},Ge=e=>()=>{e.marks=l.none;const t=e.elements.pop();if(!t)throw new Error;return Ue(e)(t.type,t.attrs,t.content)},Ke=e=>(t,n)=>{const s=t.create(n);e.marks=s.addToSet(e.marks)},Qe=e=>t=>{e.marks=t.removeFromSet(e.marks)},Xe=e=>t=>{const n=qe(e);if(!n)throw new Error;const s=n.pop(),o=t(e.marks);if(!s)return void n.push(o);const r=((e,t)=>{if($e(e)&&$e(t)&&l.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)})(s,o);r?n.push(r):n.push(s,o)},Je=e=>()=>{let t=null;do{t=Ge(e)()}while(Fe(e));return t};function Ze(e,t,n){return s=>{const o=new Be((()=>{const e={marks:[],elements:[]};return{build:Je(e),openMark:Ke(e),closeMark:Qe(e),addText:Xe(e),openNode:Ye(e),addNode:Ue(e),closeNode:Ge(e)}})(),e,t);return o.run(n,s),o.toDoc()}}class et extends je{constructor(){super(...arguments),this.id="parserLoader",this.loadAfter=Oe.SchemaReady}main(){const e=De([...this.context.nodes.map((e=>Object.assign(Object.assign({},e),{is:"node"}))),...this.context.marks.map((e=>Object.assign(Object.assign({},e),{is:"mark"})))],(e=>[e.id,Object.assign(Object.assign({},e.parser),{is:e.is})])),t=Ze(this.context.schema,e,this.context.remark);this.updateContext({parser:t})}}const tt=(e,t,n,s={})=>{const o={type:e,children:t,props:s,value:n};return Object.assign(Object.assign({},o),{push:(...e)=>((e,t,...n)=>{var s;null===(s=e.children)||void 0===s||s.push(t,...n)})(o,...e),pop:()=>(e=>{var t;return null===(t=e.children)||void 0===t?void 0:t.pop()})(o)})},nt=e=>e.elements.length,st=e=>e.elements[nt(e)-1],ot=e=>(t,n,s)=>e.elements.push(tt(t,[],n,s)),rt=e=>(t,n,s,o)=>{const r=(e=>{const t=Object.assign(Object.assign({},e.props),{type:e.type});return e.children&&(t.children=e.children),e.value&&(t.value=e.value),t})(tt(t,n,s,o));return(e=>t=>{var n;return null===(n=st(e))||void 0===n?void 0:n.push(t)})(e)(r),r},it=e=>()=>{const t=e.elements.pop();if(!t)throw new Error;return rt(e)(t.type,t.children,t.value,t.props)},at=e=>(t,n,s,o)=>{t.isInSet(e.marks)||(e.marks=t.addToSet(e.marks),ot(e)(n,s,o))},lt=e=>t=>(e.marks=t.type.removeFromSet(e.marks),it(e)()),dt=e=>()=>{let t=null;do{t=it(e)()}while(nt(e));return t};var ct,ht,mt,pt;class ut{constructor(e,t,n){this.stack=e,this.schema=t,this.specMap=n,ct.add(this),this.next=e=>{return t=e,Object.prototype.hasOwnProperty.call(t,"size")?(e.forEach((e=>{c(this,ct,"m",pt).call(this,e)})),this):(c(this,ct,"m",pt).call(this,e),this);var t},this.addNode=(...e)=>(this.stack.addNode(...e),this),this.openNode=(...e)=>(this.stack.openNode(...e),this),this.closeNode=(...e)=>(this.stack.closeNode(...e),this),this.toString=e=>e.stringify(this.stack.build()),this.withMark=(...e)=>(this.stack.openMark(...e),this)}run(e){return this.next(e),this}}function ft(e,t,n){return s=>{const o=new ut((()=>{const e={marks:[],elements:[]};return{build:dt(e),openMark:at(e),closeMark:lt(e),openNode:ot(e),addNode:rt(e),closeNode:it(e),top:()=>st(e)}})(),e,t);return o.run(s),o.toString(n)}}ct=new WeakSet,ht=function(e){const t=Object.entries(this.specMap).map((([e,t])=>Object.assign({key:e},t))).find((t=>t.match(e)));if(!t)throw new Error;return t},mt=function(e){const{runner:t}=c(this,ct,"m",ht).call(this,e);t(this,e)},pt=function(e){const{marks:t}=e;t.forEach((e=>c(this,ct,"m",mt).call(this,e))),c(this,ct,"m",mt).call(this,e),t.forEach((e=>this.stack.closeMark(e)))};class gt extends je{constructor(){super(...arguments),this.id="serializerLoader",this.loadAfter=Oe.SchemaReady}main(){const e=De([...this.context.nodes.map((e=>Object.assign(Object.assign({},e),{is:"node"}))),...this.context.marks.map((e=>Object.assign(Object.assign({},e),{is:"mark"})))],(e=>[e.id,Object.assign(Object.assign({},e.serializer),{is:e.is})])),t=ft(this.context.schema,e,this.context.remark);this.updateContext({serializer:t})}}class wt extends je{constructor(){super(...arguments),this.id="inputRulesLoader",this.loadAfter=Oe.SchemaReady}main(){const{nodes:e,marks:t,schema:n}=this.context,s=[...e.reduce(((e,t)=>{const s=n.nodes[t.id];return s&&t.inputRules?[...e,...t.inputRules(s,n)]:e}),[]),...t.reduce(((e,t)=>{const s=n.marks[t.id];return s&&t.inputRules?[...e,...t.inputRules(s,n)]:e}),[])];this.updateContext({inputRules:s})}}class kt extends je{constructor(){super(...arguments),this.id="keymapLoader",this.loadAfter=Oe.SchemaReady}main(){const{nodes:e,marks:t,schema:n}=this.context,s=[...e.map((e=>{var t;const s=n.nodes[e.id];if(!s)throw new Error;return null===(t=e.keymap)||void 0===t?void 0:t.call(e,s)})),...t.map((e=>{var t;const s=n.marks[e.id];if(!s)throw new Error;return null===(t=e.keymap)||void 0===t?void 0:t.call(e,s)}))].filter((e=>Boolean(e))).map((e=>h(e)));this.updateContext({keymap:s})}}class vt extends je{constructor(){super(...arguments),this.id="nodeViewsLoader",this.loadAfter=Oe.SchemaReady}main(){const{nodes:e,marks:t,schema:n,editor:s}=this.context,o=e.filter((e=>Boolean(e.view))).reduce(((e,t)=>{const{view:o}=t,r=n.nodes[t.id];return r&&o?Object.assign(Object.assign({},e),{[t.id]:(...e)=>o(s,r,...e)}):e}),{}),r=t.filter((e=>Boolean(e.view))).reduce(((e,t)=>{const{view:o}=t,r=n.marks[t.id];return r&&o?Object.assign(Object.assign({},e),{[t.id]:(...e)=>o(s,r,...e)}):e}),{}),i=Object.assign(Object.assign({},o),r);this.updateContext({nodeViews:i})}}var yt,bt,_t,xt;class Et extends je{constructor(){super(...arguments),yt.add(this),this.id="viewLoader",this.loadAfter=Oe.Complete}main(){const{nodeViews:e,serializer:t}=this.context,{listener:n,editable:s}=this.options,o=c(this,yt,"m",bt).call(this),r=c(this,yt,"m",_t).call(this),i=new m(r,{state:o,nodeViews:e,editable:s,dispatchTransaction:e=>{var s,o;const r=i.state.apply(e);i.updateState(r),null===(s=n.markdown)||void 0===s||s.forEach((e=>{e((()=>t(i.state.doc)))})),null===(o=n.doc)||void 0===o||o.forEach((e=>{e(i.state.doc)}))}}),a=new Proxy(i,{get:(e,t)=>"destroy"===t?()=>{e.destroy(),r.remove()}:t in e?e[t]:void 0});c(this,yt,"m",xt).call(this,i.dom),this.updateContext({editorView:a})}}yt=new WeakSet,bt=function(){const{parser:e,schema:t,inputRules:n,keymap:s,prosemirrorPlugins:o}=this.context,{defaultValue:r}=this.options,i=e(r);return p.create({schema:t,doc:i,plugins:[u(),h({"Mod-z":f,"Shift-Mod-z":g}),...s,...o,h(w),k({rules:n})]})},_t=function(){const{root:e}=this.options,t=document.createElement("div");return t.className="milkdown",e.appendChild(t),t},xt=function(e){e.classList.add("editor"),e.setAttribute("role","textbox")};const Nt=e=>class extends je{constructor(){super(...arguments),this.id=e,this.loadAfter=Oe.LoadPlugin}main(){this.updateContext({prosemirrorPlugins:this.context.prosemirrorPlugins.concat(...this.options.plugins(this.context))})}},Mt=(e,t)=>new(Nt(e))({plugins:t}),Ct=e=>class extends je{constructor(){super(...arguments),this.id=e,this.loadAfter=Oe.Idle}main(){const e=this.options.plugins(this.context).reduce(((e,t)=>e.use(t)),this.context.remark);this.updateContext({remark:e})}},Tt=(e,t)=>new(Ct(e))({plugins:t});var St,At,Pt,Ot,Lt,jt,Rt;class It{constructor(e){St.add(this),At.set(this,[]),Pt.set(this,{loadState:Oe.Idle,remark:v(),nodes:[],marks:[],editor:this,prosemirrorPlugins:[]}),Ot.set(this,(e=>{Object.assign(c(this,Pt,"f"),e)}));const t=Object.assign({root:document.body,defaultValue:"",listener:{}},e);this.use([new We,new et,new gt,new kt,new wt,new vt,new Et(t)])}use(e){return Array.isArray(e)?(e.forEach((e=>{c(this,St,"m",Rt).call(this,e)})),this):(c(this,St,"m",Rt).call(this,e),this)}create(){c(this,St,"m",Lt).call(this),[Oe.Idle,Oe.LoadSchema,Oe.SchemaReady,Oe.LoadPlugin,Oe.Complete].forEach((e=>{c(this,Pt,"f").loadState=e,c(this,St,"m",jt).call(this,e)}))}get view(){return c(this,Pt,"f").editorView}}At=new WeakMap,Pt=new WeakMap,Ot=new WeakMap,St=new WeakSet,Lt=function(){c(this,At,"f").forEach((e=>e.injectContext(c(this,Pt,"f"),c(this,Ot,"f"))))},jt=function(e){c(this,At,"f").filter((t=>t.loadAfter===e)).forEach((e=>{e.main()}))},Rt=function(e){const t=c(this,At,"f").findIndex((t=>t.id===e.id));t>=0&&(console.warn(`Atom: ${e.id} is conflicted with previous atom, the previous one will be override.`),c(this,At,"f").splice(t,1)),c(this,At,"f").push(e)};const Dt=e=>t=>{const{$from:n}=t;for(let s=n.depth;s>0;s--){const t=n.node(s);if(e(t))return{pos:s>0?n.before(s):0,start:n.start(s),depth:s,node:t}}},$t=e=>(t,n)=>{let s;const{from:o,to:r}=t;return n.nodesBetween(o,r,((t,n)=>{if(s)return!1;e(t)&&(s={node:t,pos:n})})),s},Wt=e=>Object.assign(Object.create(e),e).setTime(Date.now()),zt=i.createContext({editor:void 0,node:void 0,view:void 0,getPos:void 0,decorations:void 0}),Vt=({editor:e,node:t,view:n,getPos:s,decorations:o,children:r})=>i.createElement(zt.Provider,{value:{editor:e,node:t,view:n,getPos:s,decorations:o}},r),Ht=({dom:e})=>{const t=i.useRef(null);return i.useEffect((()=>{const{current:n}=t;n&&e&&n.appendChild(e)}),[e]),i.createElement("div",{ref:t})};class Bt{constructor(e,t,n,s,o,r,i,a){this.component=e,this.addPortal=t,this.removePortalByKey=n,this.editor=s,this.node=o,this.view=r,this.getPos=i,this.decorations=a;const l=document.createElement("div"),d=o.isLeaf?null:document.createElement(o.isInline?"span":"div");d&&l.appendChild(d),this.dom=l,this.contentDOM=d,this.key=[1e7,-1e3,-4e3,-8e3,-1e11].map((e=>e.toString())).join("").replace(/[018]/g,(e=>(Number(e)^crypto.getRandomValues(new Uint8Array(1))[0]&15>>Number(e)/4).toString(16))),this.renderPortal()}renderPortal(){if(!this.dom)return;const e=this.component,t=y.exports.createPortal(i.createElement(Vt,{editor:this.editor,node:this.node,view:this.view,getPos:this.getPos,decorations:this.decorations},i.createElement(e,null,i.createElement(Ht,{dom:this.contentDOM}))),this.dom,this.key);this.addPortal(t)}destroy(){this.dom=void 0,this.contentDOM=void 0,this.removePortalByKey(this.key)}ignoreMutation(e){return!this.contentDOM||!this.contentDOM.contains(e.target)}}const Ft=i.createContext((()=>()=>{throw new Error})),qt=e=>e.map((e=>e.key)).join(","),Yt=i.memo((({portals:e})=>i.createElement(i.Fragment,null,e)),((e,t)=>qt(e.portals)===qt(t.portals))),Ut=({editor:e})=>{const t=(e=>{const t=i.useContext(Ft),n=i.useRef(null);return i.useEffect((()=>{if(!n.current)return;const s=e(n.current,t);return s.create(),()=>{s.view.destroy()}}),[e,t]),n})(e);return i.createElement("div",{ref:t})},Gt=({editor:e})=>{const[t,n]=i.useState([]),s=i.useCallback((e=>{n((t=>[...t,e]))}),[]),o=i.useCallback((e=>{n((t=>{const n=t.findIndex((t=>t.key===e));return[...t.slice(0,n),...t.slice(n+1)]}))}),[]),r=i.useCallback((e=>((e,t)=>n=>(s,o,r,i,a,l)=>new Bt(n,e,t,s,r,i,a,l))(s,o)(e)),[s,o]);return i.createElement(Ft.Provider,{value:r},i.createElement(Yt,{portals:t}),i.createElement(Ut,{editor:e}))};function Kt(e,t){return new b(e,((e,n,s,o)=>{const{tr:r}=e,i=n.length;let a=s,l=o;if(n[i-1]){const d=n[0],c=n[i-1],h=n[i-2],m=s+d.indexOf(h),p=m+h.length-1,u=m+h.lastIndexOf(c),f=u+c.length;if(function(e,t,n){let s=[];return n.doc.nodesBetween(e,t,((e,t)=>{s=[...s,...e.marks.map((n=>({start:t,end:t+e.nodeSize,mark:n})))]})),s}(s,o,e).filter((e=>e.mark.type.excludes(t))).filter((e=>e.end>m)).length)return null;f<p&&r.delete(f,p),u>m&&r.delete(m,u),a=m,l=a+c.length}return r.addMark(a,l,t.create()),r.removeStoredMark(t),r}))}class Qt extends Ie{constructor(){super(...arguments),this.view=this.options.view}getClassName(e,t=this.id){var n,s,o;return null!==(o=null===(s=(n=this.options).className)||void 0===s?void 0:s.call(n,e))&&void 0!==o?o:t}}class Xt extends Re{constructor(){super(...arguments),this.view=this.options.view}getClassName(e,t=this.id){var n,s,o;return null!==(o=null===(s=(n=this.options).className)||void 0===s?void 0:s.call(n,e))&&void 0!==o?o:t}}const Jt=[new class extends Xt{constructor(){super(...arguments),this.id="link",this.schema={attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw new Error;return{href:e.getAttribute("href"),title:e.getAttribute("title")}}}],toDOM:e=>["a",Object.assign(Object.assign({},e.attrs),{class:this.getClassName(e.attrs)})]},this.parser={match:e=>"link"===e.type,runner:(e,t,n)=>{const s=t.url,o=t.title;e.openMark(n,{href:s,title:o}),e.next(t.children),e.closeMark(n)}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.withMark(t,"link",void 0,{title:t.attrs.title,url:t.attrs.href})}},this.inputRules=(e,t)=>[new b(/\[(?<text>.+?)]\((?<href>.*?)(?=“|\))"?(?<title>[^"]+)?"?\)/,((n,s,o,r)=>{const[i,a="",l,d]=s,{tr:c}=n;return i&&c.replaceWith(o,r,t.text(a)).addMark(o,a.length+o,e.create({title:d,href:l})),c}))]}},new class extends Xt{constructor(){super(...arguments),this.id="strong",this.schema={parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-style",getAttrs:e=>"bold"===e}],toDOM:e=>["strong",{class:this.getClassName(e.attrs)}]},this.parser={match:e=>"strong"===e.type,runner:(e,t,n)=>{e.openMark(n),e.next(t.children),e.closeMark(n)}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.withMark(t,"strong")}},this.inputRules=e=>[Kt(/(?:__)([^_]+)(?:__)$/,e),Kt(/(?:\*\*)([^*]+)(?:\*\*)$/,e)],this.keymap=e=>({"Mod-b":_(e)})}},new class extends Xt{constructor(){super(...arguments),this.id="code_inline",this.schema={excludes:"_",parseDOM:[{tag:"code"}],toDOM:e=>["code",{class:this.getClassName(e.attrs,"code-inline")}]},this.parser={match:e=>"inlineCode"===e.type,runner:(e,t,n)=>{e.openMark(n),e.addText(t.value),e.closeMark(n)}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.withMark(t,"emphasis")}},this.inputRules=e=>[Kt(/(?:^|[^`])(`([^`]+)`)$/,e)]}},new class extends Xt{constructor(){super(...arguments),this.id="em",this.schema={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>"italic"===e}],toDOM:e=>["em",{class:this.getClassName(e.attrs)}]},this.parser={match:e=>"emphasis"===e.type,runner:(e,t,n)=>{e.openMark(n),e.next(t.children),e.closeMark(n)}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.withMark(t,"emphasis")}},this.inputRules=e=>[Kt(/(?:^|[^_])(_([^_]+)_)$/,e),Kt(/(?:^|[^*])(\*([^*]+)\*)$/,e)],this.keymap=e=>({"Mod-i":_(e)})}}];const Zt=Array(5).fill(0).map(((e,t)=>t+1));var en,tn,nn;const sn=["","javascript","typescript","bash","sql","json","html","css","c","cpp","java","ruby","python","go","rust"];en=new WeakSet,tn=function(e,t,n){const{editorView:s}=this.context,o=s.posAtCoords({top:e,left:t});if(!o)return;const r=s.state.tr.setNodeMarkup(o.inside,void 0,{language:n});s.dispatch(r)},nn=function(e){const t=document.createElement("select");return t.className="code-fence_select",t.addEventListener("mousedown",(e=>{const{editorView:t}=this.context;t.editable||e.preventDefault()})),t.addEventListener("change",(e=>{if(this.context.loadState!==Oe.Complete)throw new Error("Should not trigger event before milkdown ready.");const t=e.target;if(!t)return;const{top:n,left:s}=t.getBoundingClientRect();c(this,en,"m",tn).call(this,n,s,t.value)})),sn.concat(this.options.languageList||[]).forEach((n=>{const s=document.createElement("option");s.className="code-fence_select-option",s.value=n,s.innerText=n||"--",s.selected=e===n,t.appendChild(s)})),t};const on=[new class extends Qt{constructor(){super(...arguments),this.id="doc",this.schema={content:"block+"},this.parser={match:({type:e})=>"root"===e,runner:(e,t,n)=>{e.injectRoot(t,n)}},this.serializer={match:e=>"doc"===e.type.name,runner:(e,t)=>{e.openNode("root"),e.next(t.content)}}}},new class extends Qt{constructor(){super(...arguments),this.id="paragraph",this.schema={content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:e=>["p",{class:this.getClassName(e.attrs)},0]},this.parser={match:e=>e.type===this.id,runner:(e,t,n)=>{e.openNode(n),t.children?e.next(t.children):e.addText(t.value),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("paragraph"),e.next(t.content),e.closeNode()}}}},new class extends Qt{constructor(){super(...arguments),this.id="hardbreak",this.schema={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:e=>["br",{class:this.getClassName(e.attrs)}]},this.parser={match:({type:e})=>"break"===e,runner:(e,t,n)=>{e.addNode(n)}},this.serializer={match:e=>e.type.name===this.id,runner:e=>{e.addNode("break")}},this.keymap=e=>({"Shift-Enter":(t,n)=>(null==n||n(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0)})}},new class extends Qt{constructor(){super(...arguments),this.id="blockquote",this.schema={content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:e=>["blockquote",{class:this.getClassName(e.attrs)},0]},this.parser={match:({type:e})=>e===this.id,runner:(e,t,n)=>{e.openNode(n).next(t.children).closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("blockquote").next(t.content).closeNode()}},this.inputRules=e=>[x(/^\s*>\s$/,e)]}},new class extends Qt{constructor(){super(...arguments),en.add(this),this.id="fence",this.schema={content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>{if(!(e instanceof HTMLElement))throw new Error;return{language:e.dataset.language}}}],toDOM:e=>{const t=c(this,en,"m",nn).call(this,e.attrs.language);return["div",{"data-language":"",class:this.getClassName(e.attrs,"code-fence")},["div",{contentEditable:"false"},t],["pre",["code",{spellCheck:"false"},0]]]}},this.parser={match:({type:e})=>"code"===e,runner:(e,t,n)=>{const s=t.lang,o=t.value;e.openNode(n,{language:s}),e.addText(o),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{var n;e.addNode("code",void 0,(null===(n=t.content.firstChild)||void 0===n?void 0:n.text)||"",{lang:t.attrs.language})}},this.inputRules=e=>[E(/^```$/,e)],this.keymap=()=>({Tab:(e,t)=>{const{tr:n,selection:s}=e;return!!t&&(t(n.insertText("  ",s.from,s.to)),!0)}})}},new class extends Qt{constructor(){super(...arguments),this.id="ordered_list",this.schema={content:"list_item+",group:"block",attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:e=>{if(!(e instanceof HTMLElement))throw new Error;return{order:e.hasAttribute("start")?Number(e.getAttribute("start")):1}}}],toDOM:e=>["ol",Object.assign(Object.assign({},1===e.attrs.order?{}:e.attrs.order),{class:this.getClassName(e.attrs,"ordered-list")}),0]},this.parser={match:({type:e,ordered:t})=>"list"===e&&!!t,runner:(e,t,n)=>{e.openNode(n),e.next(t.children),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("list",void 0,{ordered:!0,start:1}),e.next(t.content),e.closeNode()}},this.inputRules=e=>[x(/^(\d+)\.\s$/,e,(e=>({order:Number(e[1])})),((e,t)=>t.childCount+t.attrs.order===Number(e[1])))]}},new class extends Qt{constructor(){super(...arguments),this.id="bullet_list",this.schema={content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:e=>["ul",{class:this.getClassName(e.attrs,"bullet-list")},0]},this.parser={match:({type:e,ordered:t})=>"list"===e&&!t,runner:(e,t,n)=>{e.openNode(n).next(t.children).closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("list",void 0,{ordered:!1}).next(t.content).closeNode()}},this.inputRules=e=>[x(/^\s*([-+*])\s$/,e)]}},new class extends Qt{constructor(){super(...arguments),this.id="list_item",this.schema={content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:e=>["li",{class:this.getClassName(e.attrs,"list-item")},0]},this.parser={match:({type:e})=>"listItem"===e,runner:(e,t,n)=>{e.openNode(n),e.next(t.children),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("listItem"),e.next(t.content),e.closeNode()}},this.keymap=e=>({Enter:N(e),"Mod-]":M(e),"Mod-[":C(e)})}},new class extends Qt{constructor(){super(...arguments),this.id="heading",this.schema={content:"text*",group:"block",attrs:{level:{default:1}},parseDOM:Zt.map((e=>({tag:`h${e}`,attrs:{level:e}}))),toDOM:e=>[`h${e.attrs.level}`,{class:this.getClassName(e.attrs,`heading h${e.attrs.level}`)},0]},this.parser={match:({type:e})=>e===this.id,runner:(e,t,n)=>{const s=t.depth;e.openNode(n,{level:s}),e.next(t.children),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("heading",void 0,{depth:t.attrs.level}),e.next(t.content),e.closeNode()}},this.inputRules=e=>Zt.map((t=>E(new RegExp(`^(#{1,${t}})\\s$`),e,(()=>({level:t})))))}},new class extends Qt{constructor(){super(...arguments),this.id="hr",this.schema={group:"block",parseDOM:[{tag:"hr"}],toDOM:e=>["hr",{class:this.getClassName(e.attrs)}]},this.parser={match:({type:e})=>"thematicBreak"===e,runner:(e,t,n)=>{e.addNode(n)}},this.serializer={match:e=>e.type.name===this.id,runner:e=>{e.addNode("thematicBreak")}},this.inputRules=e=>[new b(/^(?:---|___\s|\*\*\*\s)$/,((t,n,s,o)=>{const{tr:r}=t;return n[0]&&r.replaceWith(s,o,e.create({})),r}))]}},new class extends Qt{constructor(){super(...arguments),this.id="image",this.schema={inline:!0,attrs:{src:{default:""},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,marks:"",parseDOM:[{tag:"img[src]",getAttrs:e=>{if(!(e instanceof HTMLElement))throw new Error;return{src:e.getAttribute("src")||"",alt:e.getAttribute("alt"),title:e.getAttribute("title")}}}],toDOM:e=>{var t;return(null===(t=e.attrs.src)||void 0===t?void 0:t.length)>0?["img",Object.assign(Object.assign({},e.attrs),{class:this.getClassName(e.attrs)})]:["div",Object.assign(Object.assign({},e.attrs),{class:this.getClassName(e.attrs,"image empty")}),["span",{contentEditable:"false",class:"icon"}],["span",{contentEditable:"false",class:"placeholder"}]]}},this.parser={match:({type:e})=>e===this.id,runner:(e,t,n)=>{const s=t.url,o=t.alt,r=t.title;e.openNode(n,{src:s,alt:o,title:r}),e.next(t.children),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.addNode("image",void 0,void 0,{title:t.attrs.title,url:t.attrs.src,alt:t.attrs.alt})}},this.inputRules=e=>[new b(/!\[(?<alt>.*?)]\((?<filename>.*?)(?=“|\))"?(?<title>[^"]+)?"?\)/,((t,n,s,o)=>{const[r,i,a="",l]=n,{tr:d}=t;return r&&d.replaceWith(s,o,e.create({src:a,alt:i,title:l})),d}))]}},new class extends Qt{constructor(){super(...arguments),this.id="text",this.schema={group:"inline"},this.parser={match:({type:e})=>"text"===e,runner:(e,t)=>{e.addText(t.value)}},this.serializer={match:e=>"text"===e.type.name,runner:(e,t)=>{e.addNode("text",void 0,t.text)}}}}];class rn extends Array{configure(e,t){const n=this.findIndex((t=>t.constructor===e));return n<0||this.splice(n,1,new e(t)),this}static create(e){return new rn(...e)}}const an=rn.create([...on,...Jt]),ln=(dn=e=>e.isBlock,(e,t)=>((e,t=!0)=>{const n=[];return e.descendants(((e,s)=>{if(n.push({node:e,pos:s}),!t)return!1})),n})(e,t).filter((e=>dn(e.node))));var dn;const cn={};const hn="MILKDOWN_PLUGIN_PRISM";function mn(e){let t=!1;return new P({key:new O(hn),state:{init:(e,{doc:t})=>T.create(t,[]),apply:(n,s,o,r)=>{const i=r.selection.$head.parent.type.name===e,a=o.selection.$head.parent.type.name===e,l=n.docChanged&&(i||a);return!t||l?(t=!0,function(e,t){const n=[],s=ln(e).filter((e=>e.node.type.name===t));return s.forEach((e=>{var t;let s=e.pos+1;const o=e.node.attrs.language;if(o){if(!(null===(t=cn[e.pos])||void 0===t?void 0:t.node.eq(e.node))){const t=S.highlight(e.node.textContent,o),n=(e,t=[])=>e.flatMap((e=>"element"===e.type?n(e.children,[...t,...e.properties.className||[]]):[{text:e.value,className:t}])),r=n(t).map((({text:e,className:t})=>{const n=s,o=n+e.length;return s=o,A.inline(n,o,{class:t.join(" ")})}));cn[e.pos]={node:e.node,dec:r}}cn[e.pos].dec.forEach((e=>{n.push(e)}))}})),Object.keys(cn).filter((e=>!s.find((t=>t.pos===Number(e))))).forEach((e=>{delete cn[Number(e)]})),T.create(e,n)}(n.doc,e)):s.map(n.mapping,n.doc)}},view:e=>(window.requestAnimationFrame((()=>{e.dispatch(e.state.tr.setMeta(hn,{loaded:!0}))})),{}),props:{decorations(e){return this.getState(e)}}})}const pn=Mt("prism",(()=>[mn("fence")])),un=(e,t)=>e.tagName===t.toUpperCase(),fn=e=>{const t=document.createElement("span");return t.textContent=e,t.className="icon material-icons",t},gn=(e,t)=>{const{from:n,to:s}=e.selection;return e.doc.rangeHasMark(n,s,t)},wn=(e,t)=>{var n;return null===(n=$t((e=>Boolean(t.isInSet(e.marks))))(e.selection,e.doc))||void 0===n?void 0:n.node},kn=(e,t)=>!(e=>e.selection instanceof L)(e)||(e=>Boolean(Dt((e=>"fence"===e.type.name))(e.selection)))(e)||gn(e,t),vn=(e,t,n)=>(s,o)=>{if(!o)return!1;const{start:r,end:i}=((e,t)=>{let n={start:-1,end:-1};const s=$t((e=>Boolean(t.isInSet(e.marks))))(e.selection,e.doc);return s&&(n={start:s.pos,end:s.pos+Math.max(s.node.textContent.length,1)}),n})(s,e),{tr:a}=s,l=t.create(Object.assign(Object.assign({},e.attrs),{href:n}));return a.removeMark(r,i).addMark(r,i,l).setSelection(new L(a.selection.$anchor)),o(a.scrollIntoView()),!0},yn=(e,t)=>(n,s)=>{const{target:o}=n,{nodes:r}=e,{image:i}=r;if(!(o instanceof HTMLElement))return()=>!0;if(un(o,"input"))return o.focus(),()=>!1;const a=bn(s.state.selection,i);if(!a)return()=>!1;const l=o.parentNode;if(!l)return()=>!1;const d=Array.from(l.children).find((e=>"INPUT"===e.tagName));return d instanceof HTMLInputElement?(e,n)=>{if(!n)return!1;const{tr:s}=e;return s.setNodeMarkup(a.pos,void 0,Object.assign(Object.assign({},a.node.attrs),{[t]:d.value})),n(s.scrollIntoView()),!0}:()=>!1},bn=(e,t)=>{if(!(e instanceof j))return;const{node:n,$from:s}=e;return((e,t)=>Array.isArray(e)&&e.indexOf(t.type)>-1||t.type===e)(t,n)?{node:n,pos:s.pos,depth:s.depth}:void 0},_n=(e,t,n,s)=>({$:fn(e),command:()=>_(t,s),active:e=>gn(e.state,t),disable:e=>kn(e.state,n)});var xn,En,Nn,Mn;(En=xn||(xn={}))[En.ToggleBold=0]="ToggleBold",En[En.ToggleItalic=1]="ToggleItalic",En[En.ToggleCode=2]="ToggleCode",En[En.ToggleLink=3]="ToggleLink",(Mn=Nn||(Nn={}))[Mn.ModifyLink=0]="ModifyLink",Mn[Mn.ModifyImage=1]="ModifyImage";var Cn,Tn,Sn,An,Pn,On,Ln,jn;class Rn{constructor(e,t){this.view=t,Cn.set(this,void 0),Tn.set(this,void 0),Sn.set(this,(e=>{const{view:t}=this;if(!t)return;const n=Object.values(c(this,Tn,"f")).find((({$:t})=>e.target instanceof Element&&t.contains(e.target)));n&&(e.stopPropagation(),e.preventDefault(),n.command(e,t)(t.state,t.dispatch))})),R(this,Tn,e,"f"),R(this,Cn,this.createTooltip(),"f"),c(this,Cn,"f").addEventListener("mousedown",c(this,Sn,"f"))}destroy(){c(this,Cn,"f").removeEventListener("mousedown",c(this,Sn,"f")),c(this,Cn,"f").remove()}hide(){c(this,Cn,"f").classList.add("hide")}update(e){this.filterButton(e)?this.hide():this.calcPos(e)}get noActive(){return Object.values(c(this,Tn,"f")).every((({$:e})=>e.classList.contains("hide")))}filterButton(e){return Object.values(c(this,Tn,"f")).forEach((t=>{var n;if(null===(n=t.disable)||void 0===n?void 0:n.call(t,e))return void t.$.classList.add("hide");t.$.classList.remove("hide");t.active(e)?t.$.classList.add("active"):t.$.classList.remove("active")})),this.noActive}calcPos(e){var t;c(this,Cn,"f").classList.remove("hide");const n=e.state,{from:s,to:o}=n.selection,r=e.coordsAtPos(s),i=e.coordsAtPos(o),a=Math.max((r.left+i.left)/2,r.left+3),l=null===(t=c(this,Cn,"f").offsetParent)||void 0===t?void 0:t.getBoundingClientRect();l&&(c(this,Cn,"f").style.left=a-l.left+"px",c(this,Cn,"f").style.bottom=l.bottom-r.top+"px")}createTooltip(){var e;const t=document.createElement("div");return t.className="tooltip",Object.values(c(this,Tn,"f")).forEach((({$:e})=>t.appendChild(e))),null===(e=this.view.dom.parentNode)||void 0===e||e.appendChild(t),t}}Cn=new WeakMap,Tn=new WeakMap,Sn=new WeakMap;class In{constructor(e,t){this.view=t,An.set(this,void 0),Pn.set(this,void 0),On.set(this,void 0),this.listener=e=>{const{view:t}=this,n=c(this,On,"f");t&&n&&(e.stopPropagation(),n(e,t)(t.state,t.dispatch))},R(this,Pn,e,"f"),R(this,An,this.createInput(),"f"),c(this,An,"f").addEventListener("mousedown",this.listener)}destroy(){c(this,An,"f").removeEventListener("mousedown",this.listener),c(this,An,"f").remove()}hide(){c(this,An,"f").classList.add("hide"),R(this,On,void 0,"f")}update(e){this.filterInput(e)&&this.calcPos(e)}calcPos(e){var t;const n=e.state,{from:s,to:o}=n.selection,r=e.coordsAtPos(s),i=e.coordsAtPos(o),a=Math.max((r.left+i.left)/2,r.left+3),l=c(this,An,"f").getBoundingClientRect(),d=null===(t=c(this,An,"f").offsetParent)||void 0===t?void 0:t.getBoundingClientRect();if(!d)return;const h=a-d.left-l.width/2,m=h+l.width;c(this,An,"f").style.left=(m>d.width?h-(m-d.width):h<0?a-d.left:h)+"px",c(this,An,"f").style.bottom=d.bottom-r.bottom-l.height-10+"px"}createInput(){var e;const t=document.createElement("div");t.className="tooltip-input";const n=document.createElement("input");t.appendChild(n);const s=document.createElement("button");return s.textContent="APPLY",t.appendChild(s),null===(e=this.view.dom.parentNode)||void 0===e||e.appendChild(t),t}filterInput(e){var t;const n=Object.values(c(this,Pn,"f")).find((t=>t.display(e)));return n?(c(this,An,"f").classList.remove("hide"),R(this,On,n.command,"f"),null===(t=c(this,An,"f").firstElementChild)||void 0===t||t.setAttribute("placeholder",n.placeholder),n.update(e,c(this,An,"f")),!0):(c(this,An,"f").classList.add("hide"),!1)}}An=new WeakMap,Pn=new WeakMap,On=new WeakMap;class Dn{constructor(e,t,n){Ln.set(this,void 0),jn.set(this,void 0),R(this,Ln,new Rn(e,n),"f"),R(this,jn,new In(t,n),"f"),this.update(n)}update(e,t){if(!e.editable)return void this.hide();const n=e.state;if(n.selection.empty)return void this.hide();(null==t?void 0:t.doc.eq(n.doc))&&t.selection.eq(n.selection)||(c(this,Ln,"f").update(e),c(this,jn,"f").update(e))}destroy(){c(this,Ln,"f").destroy(),c(this,jn,"f").destroy()}hide(){c(this,Ln,"f").hide(),c(this,jn,"f").hide()}}Ln=new WeakMap,jn=new WeakMap;const $n=e=>new P({key:new O("MILKDOWN_PLUGIN_TOOLTIP"),view:t=>new Dn((e=>{const{marks:t}=e.schema;return{[xn.ToggleBold]:_n("format_bold",t.strong,t.code_inline),[xn.ToggleItalic]:_n("format_italic",t.em,t.code_inline),[xn.ToggleCode]:_n("code",t.code_inline,t.link),[xn.ToggleLink]:_n("link",t.link,t.code_inline,{href:""})}})(e),(e=>{const{marks:t,nodes:n}=e.schema;return{[Nn.ModifyLink]:{display:e=>gn(e.state,t.link),command:(s=e.schema,(e,t)=>{var n;const{target:o}=e,{marks:r}=s,{link:i}=r;if(!(o instanceof HTMLElement))return()=>!0;if(un(o,"input"))return o.focus(),()=>!1;const a=wn(t.state,i);if(!a)return()=>!1;const l=a.marks.find((({type:e})=>e===i));if(!l)return()=>!1;const d=null===(n=o.parentNode)||void 0===n?void 0:n.firstChild;return d instanceof HTMLInputElement?vn(l,r.link,d.value):()=>!1}),placeholder:"Input Web Link",update:(e,n)=>{const{firstChild:s}=n;if(!(s instanceof HTMLInputElement))return;const o=wn(e.state,t.link);if(!o)return;const r=o.marks.find((e=>e.type===t.link));r&&(s.value=r.attrs.href)}},[Nn.ModifyImage]:{display:e=>Boolean(bn(e.state.selection,n.image)),command:yn(e.schema,"src"),placeholder:"Input Image Link",update:(e,t)=>{const{firstChild:s}=t;if(!(s instanceof HTMLInputElement))return;const o=bn(e.state.selection,n.image);o&&(s.value=o.node.attrs.src)}}};var s})(e),t)}),Wn=Mt("tooltip",(e=>[$n(e)]));const zn=[new class extends Ie{constructor(){super(...arguments),this.id="math_inline",this.schema={group:"inline math",content:"text*",inline:!0,atom:!0,parseDOM:[{tag:"math-inline"}],toDOM:()=>["math-inline",{class:"math-node"},0]},this.parser={match:e=>"inlineMath"===e.type,runner:(e,t,n)=>{e.openNode(n),e.addText(t.value),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{let n="";t.forEach((e=>{n+=e.text})),e.addNode("inlineMath",void 0,n)}},this.inputRules=e=>[I($,e)]}},new class extends Ie{constructor(){super(...arguments),this.id="math_display",this.schema={group:"block math",content:"text*",atom:!0,code:!0,parseDOM:[{tag:"math-display"}],toDOM:()=>["math-display",{class:"math-node"},0]},this.parser={match:e=>"math"===e.type,runner:(e,t,n)=>{e.openNode(n),e.addText(t.value),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{let n="";t.forEach((e=>{n+=e.text})),e.addNode("math",void 0,n)}},this.inputRules=e=>[D(W,e)]}}],Vn=h({Backspace:z(H,B,F,q)}),Hn=[...zn,Mt("mathProsemirrorPlugin",(()=>[V,Vn])),Tt("mathRemarkPlugin",(()=>[Y]))],Bn=e=>Dt((e=>"table"===e.type.spec.tableRole))(e),Fn=(e,t=3,n=3)=>{const{cell:s,header_cell:o,row:r,table:i}=U(e),a=Array(n).fill(0).map((()=>s.createAndFill(null))),l=Array(n).fill(0).map((()=>o.createAndFill(null))),d=Array(t).fill(0).map(((e,t)=>r.create(null,0===t?l:a)));return i.create(null,d)},qn=e=>t=>n=>{const s=Bn(n.selection),o="row"===e;if(s){const e=G.get(s.node);if(t>=0&&t<(o?e.height:e.width)){const r=e.positionAt(o?t:e.height-1,o?e.width-1:t,s.node),i=n.doc.resolve(s.start+r),a=o?K.rowSelection:K.colSelection,l=e.positionAt(o?t:0,o?0:t,s.node),d=n.doc.resolve(s.start+l);return Wt(n.setSelection(a(i,d)))}}return n},Yn=e=>{const t=(e=>{const t=Bn(e);if(!t)return;const n=G.get(t.node);return n.cellsInRect({left:0,right:n.width,top:0,bottom:n.height}).map((e=>{const n=t.node.nodeAt(e),s=e+t.start;return{pos:s,start:s+1,node:n}}))})(e.selection);if(t){const n=e.doc.resolve(t[0].pos),s=e.doc.resolve(t[t.length-1].pos);return Wt(e.setSelection(new K(s,n)))}return e},Un=Q({tableGroup:"block",cellContent:"paragraph",cellAttributes:{alignment:{default:"left",getFromDOM:e=>e.style.textAlign||"left",setDOMAttr:(e,t)=>{t.style=`text-align: ${e||"left"}`}}}});const Gn=[new class extends Ie{constructor(){super(...arguments),this.id="table",this.schema=Un.table,this.parser={match:e=>"table"===e.type,runner:(e,t,n)=>{const s=t.align,o=t.children.map(((e,t)=>Object.assign(Object.assign({},e),{align:s,isHeader:0===t})));e.openNode(n),e.next(o),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{var n;const s=null===(n=t.content.firstChild)||void 0===n?void 0:n.content;if(!s)return;const o=[];s.forEach((e=>{o.push(e.attrs.alignment)})),e.openNode("table",void 0,{align:o}),e.next(t.content),e.closeNode()}},this.inputRules=(e,t)=>[new b(/^\|\|\s$/,((n,s,o,r)=>{const i=n.doc.resolve(o);if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e))return null;const a=Fn(t),l=n.tr.replaceRangeWith(o,r,a).scrollIntoView();return l.setSelection(L.create(l.doc,o+3))}))]}},new class extends Ie{constructor(){super(...arguments),this.id="table_row",this.schema=Un.table_row,this.parser={match:e=>"tableRow"===e.type,runner:(e,t,n)=>{const s=t.align,o=t.children.map(((e,n)=>Object.assign(Object.assign({},e),{align:s[n],isHeader:t.isHeader})));e.openNode(n),e.next(o),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("tableRow"),e.next(t.content),e.closeNode()}}}},new class extends Ie{constructor(){super(...arguments),this.id="table_cell",this.schema=Un.table_cell,this.parser={match:e=>"tableCell"===e.type&&!e.isHeader,runner:(e,t,n)=>{const s=t.align;e.openNode(n,{alignment:s}).openNode(e.schema.nodes.paragraph).next(t.children).closeNode().closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("tableCell").next(t.content).closeNode()}}}},new class extends Ie{constructor(){super(...arguments),this.id="table_header",this.schema=Un.table_header,this.parser={match:e=>"tableCell"===e.type&&!!e.isHeader,runner:(e,t,n)=>{const s=t.align;e.openNode(n,{alignment:s}),e.openNode(e.schema.nodes.paragraph),e.next(t.children),e.closeNode(),e.closeNode()}},this.serializer={match:e=>e.type.name===this.id,runner:(e,t)=>{e.openNode("tableCell"),e.next(t.content),e.closeNode()}}}}];var Kn,Qn,Xn,Jn,Zn,es,ts,ns;function ss(e){const t=document.createElement("span");return t.textContent=e,t.className="icon material-icons material-icons-outlined",t}(es=Zn||(Zn={})).Left="Left",es.Top="Top",es.Point="Point",(ns=ts||(ts={}))[ns.AddColLeft=0]="AddColLeft",ns[ns.AddColRight=1]="AddColRight",ns[ns.AddRowTop=2]="AddRowTop",ns[ns.AddRowBottom=3]="AddRowBottom",ns[ns.AlignLeft=4]="AlignLeft",ns[ns.AlignCenter=5]="AlignCenter",ns[ns.AlignRight=6]="AlignRight",ns[ns.Delete=7]="Delete";const os=e=>e.state.selection;class rs{constructor(){Kn.set(this,[]),Qn.set(this,void 0),Xn.set(this,void 0),Jn.set(this,{[ts.AddColLeft]:{$:ss("chevron_left"),command:()=>X,disable:e=>!os(e).isColSelection()},[ts.AddColRight]:{$:ss("chevron_right"),command:()=>J,disable:e=>!os(e).isColSelection()},[ts.AddRowTop]:{$:ss("expand_less"),command:()=>Z,disable:e=>!os(e).isRowSelection()||"table_header"===os(e).$head.parent.type.name},[ts.AddRowBottom]:{$:ss("expand_more"),command:()=>ee,disable:e=>!os(e).isRowSelection()},[ts.AlignLeft]:{$:ss("format_align_left"),command:()=>te("alignment","left"),disable:e=>!os(e).isColSelection()},[ts.AlignCenter]:{$:ss("format_align_center"),command:()=>te("alignment","center"),disable:e=>!os(e).isColSelection()},[ts.AlignRight]:{$:ss("format_align_right"),command:()=>te("alignment","right"),disable:e=>!os(e).isColSelection()},[ts.Delete]:{$:ss("delete"),command:(e,t)=>{const n=os(t),s=n.isColSelection(),o=n.isRowSelection();return s&&o?ne:s?se:oe},disable:e=>{const t=os(e);return!!t.isRowSelection()&&(!t.isColSelection()&&(e=>{const t=G.get(e.$anchorCell.node(-1)),n=e.$anchorCell.start(-1),s=t.cellsInRect({left:0,right:t.width,top:0,bottom:1}),o=t.cellsInRect(t.rectBetween(e.$anchorCell.pos-n,e.$headCell.pos-n));for(let r=0,i=s.length;r<i;r++)if(-1===o.indexOf(s[r]))return!1;return!0})(t))}}}),this.key=new O("TABLE_OP"),this.decorations=e=>{const t=(n=0,e=>{const t=Bn(e);if(!t)return;const s=G.get(t.node);return n<0||n>=s.width?void 0:s.cellsInRect({left:n,right:n+1,top:0,bottom:s.height}).map((e=>{const n=t.node.nodeAt(e);if(!n)throw new Error;const s=e+t.start;return{pos:s,start:s+1,node:n}}))})(e.selection);var n;if(!t)return null;const s=(o=0,e=>{const t=Bn(e);if(!t)return;const n=G.get(t.node);return o<0||o>=n.height?void 0:n.cellsInRect({left:0,right:n.width,top:o,bottom:o+1}).map((e=>{const n=t.node.nodeAt(e);if(!n)throw new Error;const s=e+t.start;return{pos:s,start:s+1,node:n}}))})(e.selection);var o;if(!s)return null;const[r]=t;return this.createWidget(r,Zn.Point),t.forEach(((e,t)=>{this.createWidget(e,Zn.Left,t)})),s.forEach(((e,t)=>{this.createWidget(e,Zn.Top,t)})),T.create(e.doc,c(this,Kn,"f"))},this.update=(e,t)=>{const n=e.state;if((null==t?void 0:t.doc.eq(n.doc))&&t.selection.eq(n.selection))return;n.selection instanceof K&&e.editable?(this.calculateItem(e),Object.values(c(this,Jn,"f")).every((({$:e})=>e.classList.contains("hide")))?this.hide():(c(this,Qn,"f").classList.remove("hide"),this.calculatePosition(e))):this.hide()},this.props={decorations:this.decorations},this.view=e=>{var t;return R(this,Xn,e,"f"),Object.values(c(this,Jn,"f")).forEach((({$:e})=>c(this,Qn,"f").appendChild(e))),null===(t=e.dom.parentNode)||void 0===t||t.appendChild(c(this,Qn,"f")),this.update(e),c(this,Qn,"f").addEventListener("mousedown",this.listener),{update:this.update,destroy:()=>{c(this,Qn,"f").removeEventListener("mousedown",this.listener),c(this,Qn,"f").remove()}}},this.listener=e=>{const t=c(this,Xn,"f");t&&(e.stopPropagation(),e.preventDefault(),Object.values(c(this,Jn,"f")).forEach((({$:n,command:s})=>{n.contains(e.target)&&s(e,t)(t.state,t.dispatch)})))},R(this,Qn,document.createElement("div"),"f"),c(this,Qn,"f").classList.add("table-tooltip")}createWidget(e,t,n=0){const s=A.widget(e.pos+1,(()=>{const e=document.createElement("div");return e.classList.add(this.calculateClassName(t)),e.addEventListener("mousedown",(e=>{if(c(this,Xn,"f"))switch(e.preventDefault(),t){case Zn.Point:return void c(this,Xn,"f").dispatch(Yn(c(this,Xn,"f").state.tr));case Zn.Left:return void c(this,Xn,"f").dispatch(qn("row")(n)(c(this,Xn,"f").state.tr));case Zn.Top:return void c(this,Xn,"f").dispatch(qn("col")(n)(c(this,Xn,"f").state.tr))}})),e}));c(this,Kn,"f").push(s)}calculateClassName(e){switch(e){case Zn.Left:return"milkdown-cell-left";case Zn.Top:return"milkdown-cell-top";case Zn.Point:return"milkdown-cell-point";default:throw new Error}}calculatePosition(e){const t=e.state.selection,n=t.isColSelection(),s=t.isRowSelection(),{from:o}=t,r=c(this,Qn,"f").getBoundingClientRect(),i=e.domAtPos(o).node.getBoundingClientRect();let a=s?i.left-r.width/2-8:i.left+(i.width-r.width)/2,l=i.top-r.height-(n?18:4);a<0&&(a=0),l<r.height&&(l=i.top),c(this,Qn,"f").style.left=a+"px",c(this,Qn,"f").style.top=l+"px"}calculateItem(e){Object.values(c(this,Jn,"f")).forEach((t=>{var n;(null===(n=t.disable)||void 0===n?void 0:n.call(t,e))?t.$.classList.add("hide"):t.$.classList.remove("hide")}))}hide(){c(this,Qn,"f").classList.add("hide")}}Kn=new WeakMap,Qn=new WeakMap,Xn=new WeakMap,Jn=new WeakMap;var is,as;(as=is||(is={})).NextCell="NextCell",as.PrevCell="PrevCell",as.ExitTable="ExitTable";const ls={[is.NextCell]:"Mod-]",[is.PrevCell]:"Mod-[",[is.ExitTable]:"Mod-Enter"},ds=(e={})=>Mt("milkdown-table",(t=>{const n=Object.assign(Object.assign({},ls),e.keymap||{}),s=(e=>{return{[is.NextCell]:le(1),[is.PrevCell]:le(-1),[is.ExitTable]:(t=e.schema.nodes.paragraph,(e,n)=>{if(!re(e))return!1;const{$head:s}=e.selection,o=s.after(),r=e.tr.replaceWith(o,o,t.createAndFill());return r.setSelection(ie.near(r.doc.resolve(o),1)),null==n||n(r.scrollIntoView()),!0})};var t})(t),o=Object.entries(n).filter((e=>!!e)).reduce(((e,[t,n])=>Object.assign(Object.assign({},e),{[n]:s[t]})),{});return[de({}),ce(),new P(new rs),h(o)]})),cs=Tt("remark-table-markdown",(()=>[ae])),hs=e=>{const t=document.createElement("span");return t.textContent=e,t.classList.add("slash-placeholder"),t},ms=(e,t)=>{const n=document.createElement("div");n.setAttribute("role","option"),n.classList.add("slash-dropdown-item");const s=document.createElement("span");s.textContent=t,s.className="icon material-icons material-icons-outlined";const o=document.createElement("span");return o.textContent=e,o.className="text",n.appendChild(s),n.appendChild(o),n};var ps,us;(us=ps||(ps={}))[us.Divider=0]="Divider",us[us.H1=1]="H1",us[us.H2=2]="H2",us[us.H3=3]="H3",us[us.BulletList=4]="BulletList",us[us.OrderedList=5]="OrderedList",us[us.Quote=6]="Quote",us[us.CodeFence=7]="CodeFence",us[us.Table=8]="Table",us[us.DivideLine=9]="DivideLine",us[us.Image=10]="Image";const fs=e=>t=>(n,s)=>{if(!s)return!1;const{selection:o}=n,{$head:r}=o,i=r.pos-1-r.parent.content.size,a=n.tr.replaceWith(i,r.pos,e(t)),l=r.pos-1-r.parent.content.size+1,d=L.create(a.doc,l);return s(a.setSelection(d)),!0},gs=e=>t=>Boolean(t.schema.nodes[e]),ws=[{type:ps.H1,$:ms("Large Heading","looks_one"),command:fs((e=>e.schema.nodes.heading.create({level:1}))),keyword:["h1","large heading"],enable:gs("heading")},{type:ps.H2,$:ms("Medium Heading","looks_two"),command:fs((e=>e.schema.nodes.heading.create({level:2}))),keyword:["h2","medium heading"],enable:gs("heading")},{type:ps.H3,$:ms("Small Heading","looks_3"),command:fs((e=>e.schema.nodes.heading.create({level:3}))),keyword:["h3","small heading"],enable:gs("heading")},{type:ps.BulletList,$:ms("Bullet List","format_list_bulleted"),command:fs((e=>e.schema.nodes.bullet_list.createAndFill(null))),keyword:["bullet list","ul"],enable:gs("bullet_list")},{type:ps.OrderedList,$:ms("Ordered List","format_list_numbered"),command:fs((e=>e.schema.nodes.ordered_list.createAndFill(null))),keyword:["ordered list","ol"],enable:gs("ordered_list")},{type:ps.Image,$:ms("Image","image"),command:fs((e=>e.schema.nodes.image.createAndFill({src:""}))),keyword:["image"],enable:gs("image")},{type:ps.Quote,$:ms("Quote","format_quote"),command:fs((e=>e.schema.nodes.blockquote.createAndFill(null))),keyword:["quote","blockquote"],enable:gs("blockquote")},{type:ps.Table,$:ms("Table","table_chart"),command:fs((e=>Fn(e.schema))),keyword:["table"],enable:gs("table")},{type:ps.CodeFence,$:ms("Code Fence","code"),command:fs((e=>e.schema.nodes.fence.createAndFill(null))),keyword:["code"],enable:gs("fence")},{type:ps.DivideLine,$:ms("Divide Line","horizontal_rule"),command:fs((e=>e.schema.nodes.hr.create())),keyword:["divider","hr"],enable:gs("hr")}];var ks,vs,ys,bs,_s,xs,Es,Ns,Ms,Cs,Ts,Ss,As;const Ps=Mt("slash",(e=>[Os(e)])),Os=e=>new P(new Rs(e));var Ls,js;(js=Ls||(Ls={}))[js.Empty=0]="Empty",js[js.Slash=1]="Slash";class Rs{constructor(e){this.ctx=e,this.key=new O("milkdown-prosemirror-slash-plugin"),this.status=new Is,this.props=new Ds(this.status),this.view=e=>new $s(this.status,e,this.ctx)}}class Is{constructor(){ks.set(this,Ls.Empty),vs.set(this,""),this.activeActions=ws}clearStatus(){R(this,ks,Ls.Empty,"f"),R(this,vs,"","f")}setSlash(e=""){R(this,ks,Ls.Slash,"f"),R(this,vs,e,"f")}get cursorStatus(){return c(this,ks,"f")}get filter(){return c(this,vs,"f")}}ks=new WeakMap,vs=new WeakMap;class Ds{constructor(e){this.status=e,this.handleKeyDown=(e,t)=>{const{cursorStatus:n,activeActions:s}=this.status;return n===Ls.Slash&&0!==s.length&&(t instanceof KeyboardEvent&&!!["ArrowUp","ArrowDown","Enter"].includes(t.key))},this.decorations=e=>{const t=Dt((({type:e})=>"paragraph"===e.name))(e.selection);if(!t)return this.status.clearStatus(),null;const n=1===e.selection.$from.depth,s=0===t.node.content.size,o="/"===t.node.textContent,r=t.node.textContent.startsWith("/"),i=(t,n)=>T.create(e.doc,[A.widget(t,hs(n))]);return n?s?(this.status.clearStatus(),i(t.pos+1,"Type / to use the slash commands...")):o?(this.status.setSlash(),i(t.pos+2,"Type to filter...")):r?(this.status.setSlash(t.node.textContent.slice(1)),null):(this.status.clearStatus(),null):(this.status.clearStatus(),null)}}}class $s{constructor(e,t,n){ys.set(this,void 0),bs.set(this,void 0),_s.set(this,void 0),xs.set(this,void 0),Es.set(this,void 0),Ns.set(this,void 0),Ms.set(this,(e=>{const{target:t}=e;if(!(t instanceof HTMLElement))return;const n=c(this,Es,"f");if(!n)return;const s=Object.values(ws).find((({$:e})=>e.contains(t)));s&&(e.stopPropagation(),e.preventDefault(),s.command(c(this,_s,"f"))(n.state,n.dispatch))})),Cs.set(this,(e=>{c(this,Ns,"f")||R(this,Ns,!0,"f");const{key:t}=e;if(c(this,xs,"f").cursorStatus!==Ls.Slash)return;if(!["ArrowDown","ArrowUp","Enter"].includes(t))return;let n=c(this,xs,"f").activeActions.findIndex((e=>e.$.classList.contains("active")));if(n<0&&(n=0),"ArrowDown"===t){const e=n===c(this,xs,"f").activeActions.length-1?0:n+1;return c(this,xs,"f").activeActions[n].$.classList.remove("active"),c(this,xs,"f").activeActions[e].$.classList.add("active"),void he(c(this,xs,"f").activeActions[e].$,{scrollMode:"if-needed",block:"nearest",inline:"nearest"})}if("ArrowUp"===t){const e=0===n?c(this,xs,"f").activeActions.length-1:n-1;return c(this,xs,"f").activeActions[n].$.classList.remove("active"),c(this,xs,"f").activeActions[e].$.classList.add("active"),void he(c(this,xs,"f").activeActions[e].$,{scrollMode:"if-needed",block:"nearest",inline:"nearest"})}c(this,xs,"f").activeActions[n].command(c(this,_s,"f"))(c(this,Es,"f").state,c(this,Es,"f").dispatch),c(this,xs,"f").activeActions[n].$.classList.remove("active")})),Ts.set(this,(e=>{if(c(this,Ns,"f"))return;const t=c(this,xs,"f").activeActions.findIndex((e=>e.$.classList.contains("active")));t>=0&&c(this,xs,"f").activeActions[t].$.classList.remove("active");const{target:n}=e;n instanceof HTMLElement&&n.classList.add("active")})),Ss.set(this,(e=>{const{target:t}=e;t instanceof HTMLElement&&t.classList.remove("active")})),As.set(this,(()=>{c(this,Ns,"f")&&R(this,Ns,!1,"f")})),R(this,xs,e,"f"),R(this,ys,(()=>{const e=document.createElement("div");return e.setAttribute("role","listbox"),e.setAttribute("tabindex","-1"),e.classList.add("slash-dropdown"),e})(),"f"),R(this,_s,n,"f"),R(this,Es,t,"f"),R(this,Ns,!1,"f");const{parentNode:s}=t.dom;if(!s)throw new Error;R(this,bs,s,"f"),s.appendChild(c(this,ys,"f")),c(this,bs,"f").addEventListener("mousemove",c(this,As,"f")),ws.filter((e=>e.enable(c(this,_s,"f")))).forEach((({$:e})=>{e.addEventListener("mouseenter",c(this,Ts,"f")),e.addEventListener("mouseleave",c(this,Ss,"f")),c(this,ys,"f").appendChild(e)})),c(this,bs,"f").addEventListener("mousedown",c(this,Ms,"f")),c(this,bs,"f").addEventListener("keydown",c(this,Cs,"f"))}update(e){this.renderDropdown()&&this.calculatePosition(e)}destroy(){c(this,bs,"f").removeEventListener("mousedown",c(this,Ms,"f")),c(this,bs,"f").removeEventListener("keydown",c(this,Cs,"f")),c(this,ys,"f").remove()}renderDropdown(){const{cursorStatus:e,filter:t}=c(this,xs,"f");if(e!==Ls.Slash)return c(this,ys,"f").classList.add("hide"),!1;const n=ws.filter((e=>{e.$.classList.remove("active");return!!e.keyword.some((e=>e.includes(t.toLocaleLowerCase())))||(e.$.classList.add("hide"),!1)})).map((e=>(e.$.classList.remove("hide"),e)));return c(this,xs,"f").activeActions=n,0===n.length?(c(this,ys,"f").classList.add("hide"),!1):(n[0].$.classList.add("active"),c(this,ys,"f").classList.remove("hide"),he(n[0].$,{scrollMode:"if-needed",block:"nearest",inline:"nearest"}),!0)}calculatePosition(e){var t;const n=e.state,{from:s}=n.selection,o=e.coordsAtPos(s),r=null===(t=c(this,ys,"f").offsetParent)||void 0===t?void 0:t.getBoundingClientRect();if(!r)return;const i=c(this,ys,"f").getBoundingClientRect();if(c(this,ys,"f").style.left=o.left-r.left+"px",Math.abs(o.bottom-r.bottom)>i.height)return c(this,ys,"f").style.bottom="",void(c(this,ys,"f").style.top=o.top-r.top+20+"px");c(this,ys,"f").style.top="",c(this,ys,"f").style.bottom=o.bottom-r.bottom+190+"px"}}ys=new WeakMap,bs=new WeakMap,_s=new WeakMap,xs=new WeakMap,Es=new WeakMap,Ns=new WeakMap,Ms=new WeakMap,Cs=new WeakMap,Ts=new WeakMap,Ss=new WeakMap,As=new WeakMap;const Ws=[Ps];var zs="_editor_rw7v4_1";const Vs=({content:e,readOnly:t,onChange:n})=>{const s=((e,t=[])=>i.useCallback(((...t)=>e(...t)),t))((s=>{const o=new It({root:s,defaultValue:e,editable:()=>!t,listener:{markdown:n?[n]:[]}}).use(an).use(((e={})=>[...Gn,cs,ds(e)])()).use(pn).use(Wn).use(Hn);return t||o.use(Ws),o}),[t,e]);return i.createElement("div",{className:zs},i.createElement(Gt,{editor:s}))},Hs="https://unpkg.com/prism-themes/themes/prism-material-light.css",Bs="https://unpkg.com/prism-themes/themes/prism-nord.css",Fs=(e,t)=>{me.exports.useEffect((()=>{var e;const n=Boolean(null==(e=window.matchMedia)?void 0:e.call(window,"(prefers-color-scheme: dark)").matches);t(n)}),[t]),me.exports.useEffect((()=>{document.documentElement.setAttribute("data-theme",e?"dark":"light");(()=>{const e=document.querySelector("#prism-theme");if(e)return e;const t=document.createElement("link");return t.id="prism-theme",t.setAttribute("rel","stylesheet"),document.head.appendChild(t),t})().setAttribute("href",e?Bs:Hs)}),[e])};var qs,Ys;(Ys=qs||(qs={}))[Ys.Home=0]="Home",Ys[Ys.Demo=1]="Demo",Ys[Ys.Page=2]="Page";const Us=e=>"/"===e.pathname?0:"/online-demo"===e.pathname?1:2;function Gs(){const e=pe();return[Us(e),e]}var Ks,Qs,Xs={container:"_container_1okiu_1",milk:"_milk_1okiu_7",code:"_code_1okiu_12",twoSide:"_twoSide_1okiu_60"};(Qs=Ks||(Ks={}))[Qs.Default=0]="Default",Qs[Qs.TwoSide=1]="TwoSide";const Js=({value:e,onChange:t,lock:n,dark:s})=>{const o=i.useRef(null);return i.useEffect((()=>{if(!o.current)return;const r=function(e,t,n,s,o){return new ue({state:fe.create({doc:o,extensions:[ge,we(),ue.updateListener.of((e=>{e.focusChanged&&(n.current=e.view.hasFocus),e.docChanged&&t((()=>e.state.doc.toString()))})),ue.theme({"&.cm-focused":{outline:"none"}},{dark:s})]}),parent:e})}(o.current,t,n,s,e);return()=>{r.destroy()}}),[t,e,n,s]),i.createElement("div",{className:Xs.code},i.createElement("div",{ref:o}))},Zs=({content:e,mode:t,isDarkMode:n})=>{const s=i.useRef(e),o=i.useRef(e),[r,a]=i.useState(0),[l,d]=i.useState(0),c=i.useCallback((()=>a((e=>e+1))),[]),h=i.useCallback((()=>d((e=>e+1))),[]),m=i.useRef(!1),p=i.useCallback((e=>{if(m.current)return;const t=e();t!==s.current&&(s.current=t,h())}),[h]),u=i.useCallback((e=>{const t=e();t!==o.current&&(o.current=t,c())}),[c]),f=[Xs.container,1===t?Xs.twoSide:""].join(" ");return i.createElement("div",{className:f},i.createElement("div",{className:Xs.milk},i.createElement(Vs,{key:"milkdown"+r.toString(),content:o.current,onChange:p})),i.createElement(Js,{key:"code"+l.toString(),value:s.current,onChange:u,dark:n,lock:m}))};var eo={container:"_container_lzejo_1",header:"_header_lzejo_11",homepage:"_homepage_lzejo_31",part:"_part_lzejo_35",icon:"_icon_lzejo_39",logo:"_logo_lzejo_53",mode:"_mode_lzejo_87"};const to=`${eo.icon} material-icons-outlined`,no=({onToggle:e,scrolled:t,editorMode:n,onEditorModeToggle:s,isDarkMode:o,setIsDarkMode:r})=>{const[l,d]=i.useState(!0),[c,h]=i.useState(!1),[m]=Gs();i.useEffect((()=>{m!==qs.Page?(d(!1),m!==qs.Demo?h(!1):h(!0)):d(!0)}),[m]),Fs(o,r);const p=[eo.container,m===qs.Home?eo.homepage:""].join(" ");return i.createElement("div",{className:p},i.createElement("header",{className:eo.header},i.createElement("div",{className:eo.part},l&&i.createElement("span",{className:to,onClick:()=>null==e?void 0:e()},"menu"),i.createElement(a,{to:"/",className:eo.logo},i.createElement("img",{src:"/milkdown/milkdown-mini.svg"}),i.createElement("span",{style:{opacity:t?0:1,transition:"all 0.2s ease-in"}},"Milkdown"))),i.createElement("div",{className:eo.part},c&&i.createElement("span",{onClick:()=>s(),className:[to,eo.mode].join(" ")},n===Ks.Default?"chrome_reader_mode":"wysiwyg"),i.createElement("span",{onClick:()=>r(!o),className:to},o?"light_mode":"dark_mode"),i.createElement("a",{href:"https://github.com/Saul-Mirone/milkdown",target:"_blank",className:eo.github},i.createElement("span",{className:to},"open_in_new")))))};var so={sidebar:"_sidebar_1aujk_1",fold:"_fold_1aujk_13",hr:"_hr_1aujk_50",sectionTitle:"_sectionTitle_1aujk_57",link:"_link_1aujk_66",active:"_active_1aujk_78"};const oo=({title:e,link:t})=>i.createElement(ke,{className:so.link,activeClassName:so.active,to:t},e),ro=({title:e,items:t})=>i.createElement("section",{className:so.section},i.createElement("section",{className:so.sectionTitle},e),t.map(((e,t)=>i.createElement(oo,r({key:t.toString()},e))))),io=({sections:e,setDisplay:t,display:n})=>{const[s,o]=Gs();i.useEffect((()=>{s===qs.Page?document.documentElement.clientWidth<1080?t(!1):t(!0):t(!1)}),[s,t,o]);const a=i.useMemo((()=>`${so.sidebar} ${n?"":so.fold}`),[n]);return i.createElement("nav",{className:a},e.map(((t,n)=>i.createElement("section",{key:n.toString()},i.createElement(ro,r({key:n.toString()},t)),n<e.length-1&&i.createElement("hr",{className:so.hr})))))};const ao=[{title:"Guide",items:[{title:"Why Milkdown",link:"/why-milkdown",content:"# Why Milkdown\n\nThere are kinds of different markdown editors, such as [Typora](https://typora.io/), [tui](https://github.com/nhn/tui.editor) and [Bear](https://bear.app/).\nThey work pretty well for writing notes in markdown on different platforms. So why bother making Milkdown?\n\nMilkdown aims to provide a **open source solution** for developers to make their editors more powerful, attractive, and can be used everywhere.\n\n---\n\n## Open Source & Easy to Integration\n\nDifferent from industry apps such as [Notion](https://notion.so) and [Typora](https://typora.io/),\nMilkdown is open source and fully free. You can integrate it everywhere legally.\n\n> If you like milkdown, please consider to fund me to help the maintenance.\n\n## Plugin Driven\n\nMilkdown treats every features as plugins.\nWith this pattern, developers can choose what they need in an editor instead of bundle all features even they won't need.\nDevelopers can extends the plugin to satisfy their habit such as define a vim keymap plugin.\n\n## Reliable\n\nMilkdown is powered by [Prosemirror](https://prosemirror.net/) and [Remark](https://github.com/remarkjs/remark), which has large community and stands the test of industry.\nWhat's more, plugins in prosemirror and remark community can be easily reused to build a Milkdown plugin.\n\n## Themable & Hackable\n\nThemes and plugins for Milkdown can be shared and installed using npm packages.\n"},{title:"Getting Started",link:"/getting-started",content:"# Getting Started\n\n## Overview\n\nMilkdown is a lightweight but powerful WYSIWYG markdown editor. It's made up by two parts:\n\n-   A tiny core which provide markdown parser, serializer and kinds of plugin loader.\n-   Lots of plugins provide syntax, commands and components.\n\nWith this pattern you can enable or disable any custom syntax you like, such as table, latex and slash commands.\nYou can even create your own plugin to support your awesome idea.\n\n---\n\n## Features\n\n-   📝 **WYSIWYG Markdown** - Write markdown in an elegant way\n-   🎨 **Themable** - Theme can be shared and used with npm packages\n-   🎮 **Hackable** - Support your awesome idea by plugin\n-   🦾 **Reliable** - Built on top of [prosemirror](https://prosemirror.net/) and [remark](https://github.com/remarkjs/remark)\n-   ⚡️ **Slash & Tooltip** - Write fast for everyone, driven by plugin\n-   🧮 **Math** - LaTeX math equations support, driven by plugin\n-   📊 **Table** - Table support with fluent ui, driven by plugin\n\n## Tech Stack\n\nMilkdown is built on top of these tools:\n\n-   [Prosemirror](https://prosemirror.net/) and it's community - A toolkit for building rich-text editors on the web\n-   [Remark](https://github.com/remarkjs/remark) and it's community - Markdown parser done right\n-   [Postcss](https://postcss.org/) - Powerful css tool to build theme\n-   [TypeScript](https://www.typescriptlang.org/) - Developed by typescript\n-   [Prism](https://prismjs.com/) - Code snippets support\n-   [Katex](https://katex.org/) - LaTex math rendering\n\n---\n\n## First editor\n\nWe have some pieces for you to create a very minimal editor:\n\n> **We use [material icon](https://fonts.google.com/icons) and [Roboto Font](https://fonts.google.com/specimen/Roboto) in our theme**.\n> Make sure to include them for having the best experience.\n\n```typescript\nimport { Editor } from '@milkdown/core';\nimport { commonmark } from '@milkdown/preset-commonmark';\n\n// import theme\nimport '@milkdown/theme-nord/lib/theme.css';\n\nconst root = document.body;\nnew Editor({ root }).use(commonmark).create();\n```\n"},{title:"Interacting with Editor",link:"/interacting-with-editor",content:"# Interacting with Editor\n\n## Setting Default Value\n\nYou can set a markdown string as the default value of the editor.\n\n```typescript\nnew Editor({\n    ...\n    defaultValue: '# Hello milkdown',\n});\n```\n\nAnd then the editor will be rendered with default value.\n\n---\n\n## Adding Listener\n\nYou can add listener to the editor, get values when needed.\n\n### Markdown Listener\n\nYou can add markdown listener to get the markdown string output when needed.\n\nYou can add as many listeners as you want, all the listener will be triggered in one change.\n\n```typescript\nlet output = '';\n\nnew Editor({\n    ...\n    listener: {\n        markdown: [\n            (getMarkdown) => {\n                if (needGetOutput) {\n                    output = getMarkdown();\n                }\n            },\n            (getMarkdown) => {\n                if (needLog) {\n                    console.log(getMarkdown())\n                }\n            }\n        ]\n    }\n})\n```\n\n### Doc Listener\n\nYou can also listen to the [raw prosemirror document node](https://prosemirror.net/docs/ref/#model.Node), and do things you want.\n\n```typescript\nlet jsonOutput;\n\nnew Editor({\n    ...\n    listener: {\n        docs: [\n            (node) => {\n                jsonOutput = node.toJSON();\n            },\n        ]\n    }\n})\n```\n\n---\n\n## Readonly mode\n\nYou can set the editor to readonly mode by set the `editable` property.\n\n```typescript\nlet readonly = false;\nnew Editor({\n    ...\n    editable: () => !readonly,\n})\n\n// set to readonly after 5 secs.\nsetTimeout(() => {\n    readonly = true;\n}, 5000)\n```\n"},{title:"Styling",link:"/styling",content:"# Styling\n\nMilkdown is headless, there is no style is provided by default.\nThat means you can import themes or even create your own themes to control the style of your editor.\n\n## Option 1: Style the plain HTML\n\nThe whole editor is rendered inside of a container with the class `.milkdown`.\nAnd the editable part is wrapped in the container with the class `editor`.\nYou can use that to scope your styling to the editor content:\n\n```css\n.milkdown .editor p {\n    margin: 1rem 0;\n}\n```\n\nFor every node/mark, milkdown provides a default className,\nfor example, `paragraph` for every p node:\n\n```css\n.milkdown .editor .paragraph {\n    margin: 1rem 0;\n}\n```\n\n## Option 2: Add custom class name\n\nYou can also use `configure` method to add class to node/mark.\nIn this way, you can use css tools like `tailwind` css.\n\n```typescript\nimport { commonmark, Paragraph, Heading } from '@milkdown/commonmark';\n\nconst nodes = commonmark\n    .configure(Paragraph, {\n        className: () =>\n            'my-custom-paragraph'\n    })\n    .configure(Heading, {\n        className: (attrs) =>\n            `my-custom-heading my-h${attrs.level}`\n    })\n\nnew Editor({ ...  }).use(nodes);\n```\n"}]},{title:"Integrations",items:[{title:"React",link:"/react",content:"# React\n\nWe provide react support out of box.\n\n## Install the Dependencies\n\nExcept the `@milkdown/core`, preset and theme.\nWe need to install the `@milkdown/react`,\nwhich provide lots of abilities for react in milkdown.\n\n```bash\n# install with npm\nnpm install @milkdown/react @milkdown/core\n\n# optional\nnpm install @milkdown/preset-commonmark @milkdown/theme-nord\n```\n\n## Create a Component\n\nCreate a component is pretty easy.\n\n```typescript\nimport React from 'react';\nimport { Editor } from '@milkdown/core';\nimport { ReactEditor, useEditor } from '@milkdown/react';\nimport { commonmark } from '@milkdown/preset-commonmark';\n\nimport '@milkdown/theme-nord/lib/theme.css';\n\nexport const MilkdownEditor: React.FC = () => {\n    const editor = useEditor((root) => new Editor({ root }).use(commonmark));\n\n    return <ReactEditor editor={editor} />;\n};\n```\n\n## Custom Component for Node\n\nWe provide custom node support out of box.\n\n```typescript\nimport React from 'react';\nimport { Editor } from '@milkdown/core';\nimport { ReactEditor, useEditor, useNodeCtx } from '@milkdown/react';\nimport { commonmark, Paragraph, Image } from '@milkdown/preset-commonmark';\n\nconst CustomParagraph: React.FC = ({ children }) => <div className=\"react-paragraph\">{children}</div>;\n\nconst CustomImage: React.FC = ({ children }) => {\n    const { node } = useNodeCtx();\n\n    return (\n        <img\n            className=\"react-image\"\n            src={node.attrs.src}\n            alt={node.attrs.alt}\n            title={node.attrs.tittle}\n        />;\n    )\n};\n\nexport const MilkdownEditor: React.FC = () => {\n    const editor = useEditor((root, renderReact) => {\n        const nodes = commonmark\n            .configure(Paragraph, { view: renderReact(CustomParagraph) })\n            .configure(Image, { view: renderReact(CustomImage) });\n\n        return new Editor({ root }).use(nodes);\n    });\n\n    return <ReactEditor editor={editor} />;\n};\n```\n\nValues can be get by `useNodeCtx`:\n\n-   _editor_:\n\n    Instance of current milkdown editor.\n\n-   _node_:\n\n    Current prosemirror node need to be rendered.\n    Equal to [node parameter in nodeViews](https://prosemirror.net/docs/ref/#view.EditorProps.nodeViews).\n\n-   _view_:\n\n    Current prosemirror editor view.\n    Equal to [view parameter in nodeViews](https://prosemirror.net/docs/ref/#view.EditorProps.nodeViews).\n\n-   _getPos_:\n\n    Method to get position of current prosemirror node.\n    Equal to [getPos parameter in nodeViews](https://prosemirror.net/docs/ref/#view.EditorProps.nodeViews).\n\n-   _decorations_:\n\n    Decorations of current prosemirror node.\n    Equal to [decorations parameter in nodeViews](https://prosemirror.net/docs/ref/#view.EditorProps.nodeViews).\n"},{title:"Vue",link:"/vue",content:"# Vue\n\nWe provide vue support out of box.\n\n> Vue version should be 3.x\n\n## Install the Dependencies\n\nExcept the `@milkdown/core`, preset and theme.\nWe need to install the `@milkdown/vue`,\nwhich provide lots of abilities for vue in milkdown.\n\n```bash\n# install with npm\nnpm install @milkdown/vue @milkdown/core\n\n# optional\nnpm install @milkdown/preset-commonmark @milkdown/theme-nord\n```\n\n## Create a Component\n\nCreate a component is pretty easy.\n\n```typescript\nimport { defineComponent } from 'vue';\nimport { Editor } from '@milkdown/core';\nimport { VueEditor, useEditor } from '@milkdown/vue';\nimport { commonmark } from '@milkdown/preset-commonmark';\n\nimport '@milkdown/theme-nord/lib/theme.css';\n\nexport const MilkdownEditor = defineComponent(() => {\n    const editor = useEditor((root) => new Editor({ root }).use(commonmark));\n\n    return () => <VueEditor editor={editor} />;\n});\n```\n\n## Custom Component for Node\n\nWe provide custom node support out of box.\n\n```typescript\nimport { inject, defineComponent, DefineComponent } from 'vue';\nimport { Editor } from '@milkdown/core';\nimport { VueEditor, useEditor } from '@milkdown/vue';\nimport { commonmark, Paragraph, Image } from '@milkdown/preset-commonmark';\nimport { Node } from 'prosemirror-model';\n\nconst CustomParagraph: DefineComponent = defineComponent({\n    name: 'my-paragraph',\n    setup(_, { slots }) {\n        return () => <div class=\"vue-paragraph\">{slots.default?.()}</div>;\n    },\n});\n\nconst CustomImage: DefineComponent = defineComponent({\n    name: 'my-image',\n    setup() {\n        const node: Node = inject('node', {} as Node);\n\n        return () => <img class=\"vue-image\" src={node.attrs.src} alt={node.attrs.alt} />;\n    },\n});\n\nexport const MyEditor = defineComponent(() => {\n    const editor = useEditor((root, renderVue) => {\n        const nodes = commonmark\n            .configure(Paragraph, {\n                view: renderVue(CustomParagraph),\n            })\n            .configure(Image, {\n                view: renderVue(CustomImage),\n            });\n        return new Editor({ root }).use(nodes);\n    });\n\n    return () => <VueEditor editor={editor} />;\n});\n```\n\nValues can be inject in custom component:\n\n-   _editor_:\n\n    Instance of current milkdown editor.\n\n-   _node_:\n\n    Current prosemirror node need to be rendered.\n    Equal to [node parameter in nodeViews](https://prosemirror.net/docs/ref/#view.EditorProps.nodeViews).\n\n-   _view_:\n\n    Current prosemirror editor view.\n    Equal to [view parameter in nodeViews](https://prosemirror.net/docs/ref/#view.EditorProps.nodeViews).\n\n-   _getPos_:\n\n    Method to get position of current prosemirror node.\n    Equal to [getPos parameter in nodeViews](https://prosemirror.net/docs/ref/#view.EditorProps.nodeViews).\n\n-   _decorations_:\n\n    Decorations of current prosemirror node.\n    Equal to [decorations parameter in nodeViews](https://prosemirror.net/docs/ref/#view.EditorProps.nodeViews).\n"}]},{title:"Plugins",items:[{title:"Using Plugins",link:"/using-plugins",content:"# Using Plugins\n\n## Tasting a Plugin\n\nIn fact, all features in milkdown are supported by plugin.\nThe `commonmark` we use is a plugin. Now we can try more plugins:\n\n```typescript\nimport { Editor } from '@milkdown/core';\nimport { commonmark } from '@milkdown/preset-commonmark';\n\nimport '@milkdown/theme-nord/lib/theme.css';\n\nimport { tooltip } from '@milkdown/plugin-tooltip';\n// don't forget to import style!\nimport '@milkdown/plugin-tooltip/lib/style.css';\n\nconst root = document.body;\nnew Editor({ root }).use(commonmark).use(tooltip).create();\n```\n\n---\n\n## Finding Plugins\n\n### Official Plugins\n\nMilkdown provides the following official plugins:\n\n-   [@milkdown/plugin-table](https://www.npmjs.com/package/@milkdown/plugin-table)\n\n    Add table syntax support.\n\n-   [@milkdown/Plugin-prism](https://www.npmjs.com/package/@milkdown/plugin-prism)\n\n    Add [prism](https://prismjs.com/) support for code block highlight.\n\n-   [@milkdown/Plugin-tooltip](https://www.npmjs.com/package/@milkdown/plugin-tooltip)\n\n    Add selected tooltip for text.\n\n-   [@milkdown/Plugin-slash](https://www.npmjs.com/package/@milkdown/plugin-slash)\n\n    Add slash commands support.\n\n### Community plugins\n\nCheck out [awesome-milkdown]() to find community plugins - you can also submit a PR to list your plugins there.\n"},{title:"Building Plugins",link:"/building-plugins",content:"# Building Plugins\n\nWe provide some methods for users to build different types of plugins.\n\n---\n\n## Remark Plugin\n\nUsed to enable remark plugin.\n\n```typescript\nimport { createRemarkPlugin } from '@milkdown/core';\n\n// equal to\n// remark.use(someRemarkPlugin);\nconst remarkPlugin = createRemarkPlugin('milkdown-some-remark-plugin', () => [someMarkdownItPlugin]);\n\n// use\nmilkdown.use(remarkPlugin);\n```\n\n---\n\n## Prosemirror Plugin\n\nUsed to enable prosemirror plugin.\n\n```typescript\nimport { createProsemirrorPlugin } from '@milkdown/core';\n\n// equal to\n// markdownIt.use(markdownItTablePlugin);\nconst prosemirrorPlugin = createProsemirrorPlugin('my-plugin', () => [someProsemirrorPlugin]);\n\n// use\nmilkdown.use(prosemirrorPlugin);\n```\n"},{title:"Node & Mark",link:"/node-and-mark",content:"# Node & Mark\n\nNode and Mark are two special atoms that used to define prosemirror [Node](https://prosemirror.net/docs/ref/#model.Node) and [Mark](https://prosemirror.net/docs/ref/#model.Mark).\n\n## Overview\n\nUsers can easily define a node by the following code:\n\n```typescript\nimport { NodeParserSpec, NodeSerializerSpec, Node } from '@milkdown/core';\n\nexport class Paragraph extends Node {\n    id = 'paragraph';\n    schema = {\n        content: 'inline*',\n        group: 'block',\n        parseDOM: [{ tag: 'p' }],\n        toDOM: () => ['p', { class: 'paragraph' }, 0] as const,\n    };\n    override readonly parser: NodeParserSpec = {\n        match: (node) => node.type === this.id,\n        runner: (state, node, type) => {\n            state.openNode(type).next(node.children).closeNode();\n        },\n    };\n    override readonly serializer: NodeSerializerSpec = {\n        match: (node) => node.type.name === this.id,\n        runner: (state, node) => {\n            state.openNode('paragraph').next(node.content).closeNode();\n        },\n    };\n}\n```\n\n> You can also add `readonly override` for every properties to have a safer code.\n>\n> Such as `readonly override id: 'paragraph'`.\n\n---\n\n## Properties\n\n**Required.** There are 4 required properties and 3 optional properties need to be implemented by every node/mark.\n\n### id\n\n**Required.** The identifier of the node/mark, will be used as key of prosemirror schema.\n\n### schema\n\n**Required.** The prosemirror [schema](https://prosemirror.net/docs/ref/#model.Schema) specification of this node/mark.\n\n### parser\n\n**Required.** The parser specification, used to register the node/mark in parser.\n\n### serializer\n\n**Required.** The serializer specification, used to serialize the node/mark into string in serializer.\n\n### inputRules?\n\n**Optional.** The prosemirror [input rules](https://prosemirror.net/docs/ref/#inputrules.InputRule) this node/mark creates.\n\n### keymap?\n\n**Optional.** The prosemirror [key map](https://prosemirror.net/docs/ref/#keymap) this node/mark creates.\n\n### view?\n\n**Optional.** The prosemirror [node view](https://prosemirror.net/docs/ref/#view.NodeView) of this node/mark.\n\n---\n\n> You can find more examples in the official repositories like [preset-commonmark](https://github.com/Saul-Mirone/milkdown/tree/main/packages/preset-commonmark) and [plugin-table](https://github.com/Saul-Mirone/milkdown/tree/main/packages/plugin-table).\n"},{title:"Parser",link:"/parser",content:"# Parser\n\nParser is used to transform from markdown string to UI elements.\n\n## Transform Steps\n\nThe transformation will have following steps:\n\n1. The markdown string will be given to [remark-parse](https://github.com/remarkjs/remark/tree/main/packages/remark-parse) to compile into AST.\n2. The remark AST will be traversed by milkdown parser. The milkdown parser is generated by the parser property of nodes and marks and generate a prosemirror node tree as the result.\n3. The prosemirror node will rendered by prosemirror and generate the UI elements.\n\n## Example\n\nFor every node, there will be a parser specification which has the following structure:\n\n```typescript\nimport { NodeParserSpec, Node } from '@milkdown/core';\n\nclass MyNode extends Node {\n    // other props...\n    parser: NodeParserSpec = {\n        match: (node) => node.type === 'my-node',\n        runner: (state, node, type) => {\n            state.openNode(type).next(node.children).closeNode();\n        },\n    };\n}\n```\n\n## Parser Specification\n\nThe parser specification has 2 props:\n\n-   _match_: match the target remark node that need to be handled by this runner.\n\n-   _runner_: the function that transform the remark into prosemirror node, it has 3 parameters:\n\n    -   _state_: tools used to generate the prosemirror node.\n    -   _node_: the remark node that need to be handled.\n    -   _type_: the prosemirror _[nodeType](https://prosemirror.net/docs/ref/#model.NodeType)_ of current node,\n        defined by `schema` property of current node.\n\n## Parser State\n\nThe parser state is used to generate the prosemirror node,\nit provides several useful methods to make the transformation pretty simple.\n\nFirst of all, we should keep in mind that the tree we need to handle has following structure:\n\n```typescript\ninterface NodeTree {\n    type: string;\n    children: NodeTree[];\n    [x: string]: unknown;\n}\n```\n\nThen, it's easy to understand our state API.\n\n### openNode & closeNode\n\n`openNode` method will open a node, and all nodes created after this method will be set as the children of the node until a `closeNode` been called.\n\nYou can imagine `openNode` as the left half of parenthesis and `closeNode` as the right half. For nodes have children, your runner should just take care of the node itself and let other runners to handle the children.\n\nYou can pass the node's attributes as the second parameter for `openNode`.\n\n### addNode\n\n`addNode` means just add a node without open or close it. It's useful for nodes which don't have children.\n\nYou can pass the node's attributes as the second parameter.\n\n### next\n\n`next` give the node or node list back to the state and the state will find a proper runner (by `match` method) to handle it.\n\n### openMark & closeMark\n\nThese two APIs are pretty like `openNode` and `closeNode`, but just for marks.\n\nYou can pass the marks's attributes as the second parameter for `openMark`.\n"},{title:"Serializer",link:"/serializer",content:"# Serializer\n\nSerializer is used to transform from UI elements to markdown string.\n\n## Transform Steps\n\nThe transformation steps are almost opposite to the steps in parser.\n\n1. For the current UI status, there will be a prosemirror node tree to represent it.\n2. The prosemirror node tree will be traversed by milkdown serializer. The milkdown serializer is generated by the serializer property of nodes and marks and generate a remark AST as the result.\n3. The remark AST will by transformed into markdown string through [remark-stringify](https://github.com/remarkjs/remark/tree/main/packages/remark-stringify).\n\n## Example\n\nFor every node, there will be a serializer specification which has the following structure:\n\n```typescript\nimport { NodeSerializerSpec, Node } from '@milkdown/core';\n\nclass MyNode extends Node {\n    // other props...\n    serializer: NodeSerializerSpec = {\n        match: (node) => node.type.name === 'my-node',\n        runner: (state, node) => {\n            state.openNode('my-node').next(node.content).closeNode();\n        },\n    };\n}\n```\n\n## Serializer Specification\n\nThe serializer specification has 2 props:\n\n-   _match_: match the target prosemirror node that need to be handled by this runner.\n\n-   _runner_: the function that transform the prosemirror node into remark AST, it has 2 parameters:\n\n    -   _state_: tools used to generate the remark AST.\n    -   _node_: the prosemirror node that need to be handled.\n\n## Serializer State\n\nThe serializer state is used to generate the remark AST,\nit provides several useful methods to make the transformation pretty simple.\n\n### openNode & closeNode\n\n`openNode` method will open a node, and all nodes created after this method will be set as the children of the node until a `closeNode` been called.\n\nYou can imagine `openNode` as the left half of parenthesis and `closeNode` as the right half. For nodes have children, your runner should just take care of the node itself and let other runners to handle the children.\n\nParameters:\n\n-   _type_: the type of the AST.\n-   _value_: the value of the remark AST.\n-   _props_: the properties of the AST.\n\nThe props will be spread, for example:\n\n```typescript\nopenNode('my-node', undefined, { foo: true, bar: 0 });\n// will generate:\nconst generatedCode = {\n    type: 'my-node',\n    foo: true,\n    bar: 0,\n    children: [\n        /* some children */\n    ],\n};\n```\n\n### addNode\n\n`addNode` means just add a node without open or close it. It's useful for nodes which don't have content.\n\nParameters:\n\n-   _type_: the type of the AST.\n-   _children_: a markdown node list as the children of the AST.\n-   _value_: the value of the remark AST.\n-   _props_: the properties of the AST.\n\n### next\n\n`next` give the node or node list back to the state and the state will find a proper runner (by `match` method) to handle it.\n\n### withMark\n\n`withMark` is used when current node has marks, the serializer will auto combine marks nearby.\n\nParameters:\n\n-   _mark_: the mark of current node.\n-   _type_: the type of the AST.\n-   _value_: the value of the remark AST.\n-   _props_: the properties of the AST.\n"}]},{title:"Architecture",items:[{title:"Core",link:"/core",content:"# Core\n\nMilkdown core is composed mainly by three parts:\n\n-   Markdown Parser\n-   Markdown Serializer\n-   Prosemirror\n\n---\n\n## Markdown Parser\n\n> The parser can **transform a markdown string into a prosemirror node tree**.\n\nIt is mainly used by transforming the default value, and can be used in features like paste markdown strings.\n\nThe parser will parse the markdown strings into ast by [remark](https://github.com/remarkjs/remark),\nand transform the ast into the prosemirror node.\n\n## Markdown Serializer\n\n> The serializer can **transform a prosemirror node into a markdown string**.\n\nIt is mainly used by listeners, and can be used in features like export to file.\nThe serializer will parse the prosemirror node tree and transform it into markdown ast,\nthen the ast can be serialized into markdown string.\n\n## Prosemirror\n\n> Prosemirror is **used for render editor**.\n\nWhen users interact with the editor, they actually interact with the [prosemirror view instance](https://prosemirror.net/docs/guide/#view).\n\n---\n\nSo basically,\na milkdown editor works following these steps:\n\n1. Default value is parsed by parser, generates a node.\n2. Node generated by step 1 will be used to create a prosemirror instance.\n3. When changes are triggered, the listeners will be called and developers can use serializer to get markdown string.\n"},{title:"Atom",link:"/atom",content:"# Atom\n\nIn the world of milkdown, everything are `Atom`s.\nThe only thing the core part of milkdown do is execute these atoms one by one.\n\nAtom has the shape of the following structure:\n\n```typescript\nclass Atom {\n    id: string;\n    loadAfter: LoadState;\n    main() {\n        const currentCtx = this.context;\n        const myCtx = myHandler(currentCtx);\n        this.updateContext(myCtx);\n    }\n}\n```\n\nEvery atom should implement 2 props and 1 method:\n\n## id\n\nThe identifier of current atom. It must have no conflict with other atoms.\n\n## loadAfter\n\nThe timing that current atom need to be loaded.\n\n## main\n\nA method that will be executed when current atom is loaded, in this method, you can use 2 props on `this`:\n\n-   this.context: readonly property, get the current context of the editor.\n-   this.updateContext: used to update the context of the editor.\n"},{title:"Ordering",link:"/ordering",content:"# Ordering\n\nAs we mentioned before, milkdown core will load atoms one by one.\nThe order of the atoms loaded matters.\n\nWe have defined a `LoadState` enum so Atoms can be loaded **after the pointed loadState**.\nYou can access certain properties in context during the given load state.\n\n**Generally speaking, there is no need for you to set the load state of an atom,\nwe have provide some utilities for users to create certain types of atoms.**\n\n---\n\n## LoadState\n\nThe `LoadState` enum has following values:\n\n### 1. Idle:\n\nThis state means the editor is preparing, nothing has been loaded.\n\nProperty in context that available at this moment:\n\n-   _loadState_: Current load status.\n-   _remark_: The remark parser instance.\n-   _nodes_: The nodes has been loaded at this moment.\n-   _marks_: The marks has been loaded at this moment.\n\n### 2. LoadSchema:\n\nThis state means the editor is ready to generate the schema.\n\nProperty in context that available at this moment:\n\n-   All properties available in Idle.\n\n### 3. SchemaReady:\n\nThis state means the editor has generated the schema.\n\nProperty in context that available at this moment:\n\n-   All properties available in LoadSchema.\n-   _schema_: The generated schema.\n-   _parser_: The markdown parser generated by schema.\n-   _serializer_: The markdown serializer generated by schema.\n-   _keymap_: The keymap generated by schema.\n-   _inputRules_: The inputRules generated by schema.\n-   _nodeViews_: The nodeViews generated by schema.\n\n### 4. LoadPlugin:\n\nThis state means the editor is ready to load prosemirror plugin.\n\nProperty in context that available at this moment:\n\n-   All properties available in SchemaReady.\n-   _prosemirrorPlugins_: The prosemirror plugins to be loaded.\n\n### 5. Complete:\n\nThis state means the editor has fully loaded.\n\nProperty in context that available at this moment:\n\n-   All properties available in LoadPlugin.\n-   _editorView_: The view instance of prosemirror.\n"}]}];var lo={body:"_body_142kp_1",right:"_right_142kp_6",main:"_main_142kp_10",container:"_container_142kp_16",homepage:"_homepage_142kp_65"};var co={footer:"_footer_7hn2r_1",homepage:"_homepage_7hn2r_11"};const ho=()=>{const[e]=Gs(),t=[co.footer,e===qs.Home?co.homepage:""].join(" ");return i.createElement("footer",{className:t},"MIT Licensed | Copyright © 2021-present Mirone ♡ Meo")},mo=ao.flatMap((e=>e.items)),po=({setScrolled:e,isDarkMode:t,editorMode:n})=>{const s=i.useRef(null),[o]=Gs(),r=[lo.container,o===qs.Home?lo.homepage:""].join(" ");return i.useEffect((()=>{if(!s.current)return;const{current:t}=s,n=t=>{const{target:n}=t;if(!(n instanceof HTMLDivElement))return;const{scrollTop:s}=n;e(s>0)};return t.addEventListener("scroll",n),()=>{t.removeEventListener("scroll",n)}}),[e]),i.createElement("div",{ref:s,className:r},i.createElement("article",null,i.createElement(ye,null,i.createElement(be,{exact:!0,path:"/"},i.createElement(Pe,null)),i.createElement(be,{exact:!0,path:"/online-demo"},i.createElement(Zs,{mode:n,content:"# Milkdown\n\n![logo](https://preview.redd.it/us7w1x2zx8461.jpg?auto=webp&s=077a73d5c08aec0bc0fb48c5e5be40c928467bb6)\n\n> Milkdown is a WYSIWYG markdown editor.\n>\n> Here is the [repo](https://github.com/Saul-Mirone/milkdown) (_right click to open link_).\n\nYou can check the output markdown text in **developer tool**.\n\n---\n\nYou can add `inline code` and code block:\n\n```javascript\nfunction main() {\n    console.log('Hello milkdown!');\n}\n```\n\n---\n\nYou can type `||` and a `space` to create a table:\n\n| First Header   |   Second Header    |\n| -------------- | :----------------: |\n| Content Cell 1 |  `Content` Cell 1  |\n| Content Cell 2 | **Content** Cell 2 |\n\n---\n\nMath is supported by [TeX expression](https://en.wikipedia.org/wiki/TeX).\n\nNow we have some inline math: $V \\times W \\stackrel{\\otimes}{\\rightarrow} V \\otimes W$. You can click to edit it.\n\nMath block is also supported.\n\n$$\n\\begin{aligned}\nT( (v_1 + v_2) \\otimes w) &= T(v_1 \\otimes w) + T(v_2 \\otimes w) \\\\\nT( v \\otimes (w_1 + w_2)) &= T(v \\otimes w_1) + T(v \\otimes w_2) \\\\\nT( (\\alpha v) \\otimes w ) &= T( \\alpha ( v \\otimes w) ) \\\\\nT( v \\otimes (\\alpha w) ) &= T( \\alpha ( v \\otimes w) ) \\\\\n\\end{aligned}\n$$\n\nYou can type `$$` and a `space` to create a math block.\n\n---\n\nHave fun!\n",isDarkMode:t})),mo.map(((e,t)=>i.createElement(be,{key:t.toString(),path:e.link},i.createElement(Vs,{content:e.content,readOnly:!0})))))),i.createElement(ho,null))},uo=()=>{const[e,t]=i.useState(!1),[n,s]=i.useState(!1),[o,r]=i.useState(Ks.Default),[a,l]=i.useState(!1);return i.createElement(ve,null,i.createElement("div",{className:lo.body},i.createElement(io,{display:e,setDisplay:t,sections:ao}),i.createElement("div",{className:lo.right},i.createElement(no,{isDarkMode:a,setIsDarkMode:l,onEditorModeToggle:()=>r(o===Ks.Default?Ks.TwoSide:Ks.Default),onToggle:()=>t(!e),scrolled:n,editorMode:o}),i.createElement("main",{className:lo.main,onClick:()=>{document.documentElement.clientWidth<1080&&t(!1)}},i.createElement(po,{isDarkMode:a,setScrolled:s,editorMode:o})))))};const fo=document.getElementById("app");y.exports.render(i.createElement(uo,null),fo);

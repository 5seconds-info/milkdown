var e=Object.defineProperty,t=Object.prototype.hasOwnProperty,r=Object.getOwnPropertySymbols,n=Object.prototype.propertyIsEnumerable,s=(t,r,n)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[r]=n,i=(e,i)=>{for(var o in i||(i={}))t.call(i,o)&&s(e,o,i[o]);if(r)for(var o of r(i))n.call(i,o)&&s(e,o,i[o]);return e};import{c as o,p as a,t as l,a as c,D as u,b as d,d as h,e as p,f as m,g as f}from"./vendor.06bd12e5.js";!function(e=".",t="__import__"){try{self[t]=new Function("u","return import(u)")}catch(r){const n=new URL(e,location),s=e=>{URL.revokeObjectURL(e.src),e.remove()};self[t]=e=>new Promise(((r,i)=>{const o=new URL(e,n);if(self[t].moduleMap[o])return r(self[t].moduleMap[o]);const a=new Blob([`import * as m from '${o}';`,`${t}.moduleMap['${o}']=m;`],{type:"text/javascript"}),l=Object.assign(document.createElement("script"),{type:"module",src:URL.createObjectURL(a),onerror(){i(new Error(`Failed to import: ${e}`)),s(l)},onload(){r(self[t].moduleMap[o]),s(l)}});document.head.appendChild(l)})),self[t].moduleMap={}}}("/assets/");var g=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;t.State=class{constructor(e,t,r){this.stack=e,this.schema=t,this.tokenHandlers=r}parseTokens(e){e.forEach(((t,r)=>{const n=this.tokenHandlers[t.type];if(!n)throw new Error("Token type `"+t.type+"` not supported by Markdown parser");n(this,t,e,r)}))}addText(e){e&&this.stack.addText((t=>this.schema.text(e,t)))}transformTokensToDoc(e){this.parseTokens(e);let t=null;do{t=this.stack.closeNode()}while(this.stack.length);return t}}})),k=o((function(e,t){function r(e){return e.isText}Object.defineProperty(t,"__esModule",{value:!0}),t.maybeMerge=t.hasText=void 0,t.hasText=r,t.maybeMerge=function(e,t){if(r(e)&&r(t)&&a.Mark.sameSet(e.marks,t.marks))return e.withText(e.text+t.text)}})),b=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Stack=void 0;t.Stack=class{constructor(e){this.els=[{type:e,content:[]}],this.marks=a.Mark.none}top(){const{els:e}=this;return e[e.length-1]}pushInTopEl(e){var t;null==(t=this.top())||t.content.push(e)}get length(){return this.els.length}openMark(e){this.marks=e.addToSet(this.marks)}closeMark(e){this.marks=e.removeFromSet(this.marks)}addText(e){const t=this.top();if(!t)throw new Error;const r=t.content,n=r[r.length-1],s=e(this.marks),i=n&&k.maybeMerge(n,s);i?r[r.length-1]=i:r.push(s)}openNode(e,t){this.els.push({type:e,attrs:t,content:[]})}addNode(e,t,r){const n=e.createAndFill(t,r,this.marks);return n?(this.pushInTopEl(n),n):null}closeNode(){this.marks.length&&(this.marks=a.Mark.none);const e=this.els.pop();if(!e)throw new Error;return this.addNode(e.type,e.attrs,e.content)}}})),y=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.noOp=t.isIgnoreSpec=t.isMarkSpec=t.isNodeSpec=t.isBlockSpec=t.attrs=void 0,t.attrs=function(e,t,r,n){return e.getAttrs?e.getAttrs(t,r,n):e.attrs},t.isBlockSpec=function(e){return Reflect.has(e,"block")},t.isNodeSpec=function(e){return Reflect.has(e,"node")},t.isMarkSpec=function(e){return Reflect.has(e,"mark")},t.isIgnoreSpec=function(e){return Reflect.has(e,"ignore")},t.noOp=function(){}})),v=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createTokenHandlers=void 0,t.createTokenHandlers=function(e,t){const r={softbreak:e=>e.addText("\n")};return Object.entries(t).forEach((([t,n])=>{if(y.isBlockSpec(n)){const s=e.nodes[n.block];if(!s)throw new Error;return["hr","hardbreak","fence"].includes(t)?void(r[t]=(e,t,r,i)=>{e.stack.openNode(s,y.attrs(n,t,r,i)),e.addText(t.content),e.stack.closeNode()}):(r[t+"_open"]=(e,t,r,i)=>e.stack.openNode(s,y.attrs(n,t,r,i)),void(r[t+"_close"]=e=>e.stack.closeNode()))}if(!y.isNodeSpec(n)){if(y.isMarkSpec(n)){const s=e.marks[n.mark];if(!s)throw new Error;return["code_inline"].includes(t)?void(r[t]=(e,t,r,i)=>{e.stack.openMark(s.create(y.attrs(n,t,r,i))),e.addText(t.content),e.stack.closeMark(s)}):(r[t+"_open"]=(e,t,r,i)=>e.stack.openMark(s.create(y.attrs(n,t,r,i))),void(r[t+"_close"]=e=>e.stack.closeMark(s)))}if(y.isIgnoreSpec(n))return r[t+"_open"]=y.noOp,void(r[t+"_close"]=y.noOp);throw new RangeError("Unrecognized parsing spec "+JSON.stringify(n))}{const s=e.nodes[n.node];if(!s)throw new Error;r[t]=(e,t,r,i)=>e.stack.addNode(s,y.attrs(n,t,r,i))}})),r.inline=(e,t)=>{var r;return e.parseTokens(null!=(r=t.children)?r:[])},r.text=(e,t)=>e.addText(t.content),r}})),O=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createParser=void 0,t.createParser=function(e,t,r){return n=>new g.State(new b.Stack(e.topNodeType),e,v.createTokenHandlers(e,r)).transformTokensToDoc(t.parse(n,{}))}})),_=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Utility=void 0;t.Utility=class{static escape(e,t){let r=e.replace(/[`*\\~[\]]/g,"\\$&");return t&&(r=r.replace(/^[:#\-*+]/,"\\$&").replace(/^(\d+)\./,"$1\\.")),r}static quote(e){const t=-1===e.indexOf('"')?'""':-1===e.indexOf("'")?"''":"()";return t[0]+e+t[1]}static repeat(e,t){return Array(t).fill(e).reduce(((e,t)=>e+t),"")}static getEnclosingWhitespace(e){return{leading:(e.match(/^(\s+)/)||[])[0],trailing:(e.match(/(\s+)$/)||[])[0]}}static removeWhiteSpaceAfter(e){const t=/\s+$/.exec(e);return t?e.slice(0,t.index):e}}})),M=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.State=void 0;t.State=class{constructor(e,t){this.nodes=e,this.marks=t,this.out="",this.delimitation="",this.closed=!1,this.utils=_.Utility,this.nodes=e,this.marks=t}get output(){return this.out}get atBlank(){return/(^|\n)$/.test(this.out)}renderContent(e){return e.forEach(((t,r,n)=>this.render(t,e,n))),this}render(e,t,r){const n=this.nodes[e.type.name];if(!n)throw new Error;return n(this,e,t,r),this}ensureNewLine(){return this.atBlank||(this.out+="\n"),this}closeBlock(e){return this.closed=e,this}flushClose(e=1){if(!this.closed)return this;if(this.atBlank||(this.out+="\n"),e>=1){const t=this.utils.removeWhiteSpaceAfter(this.delimitation),r=this.utils.repeat(t+"\n",e);this.out+=r}return this.closed=!1,this}write(e){return this.flushClose(),e?(this.delimitation&&this.atBlank&&(this.out+=this.delimitation),this.out+=e,this):this}text(e,t=!1){const r=e.split("\n");return r.forEach(((e,n)=>{const s=t?this.utils.escape(e,Boolean(this.atBlank||this.closed)):e;this.write(s);n===r.length-1||(this.out+="\n")})),this}wrapBlock(e,t,r,n=e){this.write(n);const s=this.delimitation;return this.delimitation+=e,r(),this.delimitation=s,this.closeBlock(t),this}markString(e,t,r,n){const s=this.marks[e.type.name];if(!s)throw new Error;const i=t?s.open:s.close;return"string"==typeof i?i:i(this,e,r,n)}wrapWithMark(e,t,r,n){const s=this.markString(e,!0,t,r),i=this.markString(e,!1,t,r+1);return this.text(s+n+i),this}serializeMarks(e,t,r,n=!1){return e.map((e=>this.markString(e,n,t,r))).join("")}renderInline(e){let t=[];const r=(e=!1)=>(t,r)=>{var n,s,i,o;const a=null!=(s=null==(n=this.marks[t.type.name])?void 0:n.priority)?s:0,l=null!=(o=null==(i=this.marks[r.type.name])?void 0:i.priority)?o:0;return e?a-l:l-a};return e.forEach(((n,s,i)=>{if(!k.hasText(n))return void this.render(n,e,i);const o=n.marks||[],a=t.filter((e=>!o.includes(e))).sort(r()),l=o.filter((e=>!t.includes(e))).sort(r(!0));l.forEach((e=>t.push(e))),t=t.filter((e=>!a.includes(e)));const c=this.serializeMarks(l,e,i,!0),u=this.serializeMarks(a,e,i+1);this.write(u+c+n.text)})),(()=>{const r=this.serializeMarks(t,e,e.childCount+1);this.write(r)})(),this}renderList(e,t,r){this.closed&&this.closed.type===e.type&&this.flushClose(2),e.forEach(((n,s,i)=>{this.wrapBlock(t,e,(()=>this.render(n,e,i)),r(i))}))}}})),P=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createSerializer=void 0,t.createSerializer=function(e,t){return r=>{const n=new M.State(e,t);return n.renderContent(r),n.output}}})),j=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Base=void 0;t.Base=class{constructor(e){this.editor=e}}})),w=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Mark=void 0;class r extends j.Base{}t.Mark=r})),S=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Node=void 0;class r extends j.Base{}t.Node=r})),x=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),l.__exportStar(w,t),l.__exportStar(S,t),l.__exportStar(j,t)})),B=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.markRule=void 0,t.markRule=function(e,t){return new c.InputRule(e,((e,r,n,s)=>{const{tr:i}=e,o=r.length;let a=n,l=s;if(r[o-1]){const c=r[0],u=r[o-1],d=r[o-2],h=n+c.indexOf(d),p=h+d.length-1,m=h+d.lastIndexOf(u),f=m+u.length;if(function(e,t,r){let n=[];return r.doc.nodesBetween(e,t,((e,t)=>{n=[...n,...e.marks.map((r=>({start:t,end:t+e.nodeSize,mark:r})))]})),n}(n,s,e).filter((e=>e.mark.type.excludes(t))).filter((e=>e.end>h)).length)return null;f<p&&i.delete(f,p),m>h&&i.delete(h,m),a=h,l=a+u.length}return i.addMark(a,l,t.create()),i.removeStoredMark(t),i}))}})),I=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeInline=void 0;class r extends x.Mark{constructor(){super(...arguments),this.name="code_inline",this.schema={excludes:"_",parseDOM:[{tag:"code"}],toDOM:()=>["code",{class:"code-inline"}]},this.parser={mark:"code_inline"},this.serializer={open:"`",close:"`"},this.inputRules=e=>[B.markRule(/(?:^|[^`])(`([^`]+)`)$/,e)],this.keymap=()=>({})}}t.CodeInline=r})),L=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Em=void 0;class r extends x.Mark{constructor(){super(...arguments),this.name="em",this.schema={parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:e=>"italic"===e}],toDOM:()=>["em",{class:"em"}]},this.parser={mark:"em"},this.serializer={open:"*",close:"*"},this.inputRules=e=>[B.markRule(/(?:^|[^_])(_([^_]+)_)$/,e),B.markRule(/(?:^|[^*])(\*([^*]+)\*)$/,e)],this.keymap=()=>({})}}t.Em=r})),E=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Link=void 0;class r extends x.Mark{constructor(){super(...arguments),this.name="link",this.schema={attrs:{href:{},title:{default:null}},inclusive:!1,parseDOM:[{tag:"a[href]",getAttrs:e=>({href:e.getAttribute("href"),title:e.getAttribute("title")})}],toDOM:e=>["a",i(i({},e.attrs),{class:"link"})]},this.parser={mark:"link",getAttrs:e=>({href:e.attrGet("href"),title:e.attrGet("title")||null})},this.serializer={open:()=>"[",close:(e,t)=>`](${e.utils.escape(t.attrs.href)}${t.attrs.title?` ${e.utils.quote(t.attrs.title)}`:""})`,priority:1},this.inputRules=(e,t)=>[new c.InputRule(/\[(?<text>.+?)]\((?<href>.+?)(?=“|\))"?(?<title>[^"]+)?"?\)/,((r,n,s,i)=>{const[o,a="",l,c]=n,{tr:u}=r;return o&&u.replaceWith(s,i,t.text(a)).addMark(s,a.length+s,e.create({title:c,href:l})),u}))],this.keymap=()=>({})}}t.Link=r})),N=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Strong=void 0;class r extends x.Mark{constructor(){super(...arguments),this.name="strong",this.schema={parseDOM:[{tag:"b"},{tag:"strong"},{style:"font-style",getAttrs:e=>"bold"===e}],toDOM:()=>["strong",{class:"strong"}]},this.parser={mark:this.name},this.serializer={open:"**",close:"**"},this.inputRules=e=>[B.markRule(/(?:__)([^_]+)(?:__)$/,e),B.markRule(/(?:\*\*)([^*]+)(?:\*\*)$/,e)],this.keymap=()=>({})}}t.Strong=r})),R=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.marks=t.Strong=t.Link=t.Em=t.CodeInline=void 0;var r=I;Object.defineProperty(t,"CodeInline",{enumerable:!0,get:function(){return r.CodeInline}});var n=L;Object.defineProperty(t,"Em",{enumerable:!0,get:function(){return n.Em}});var s=E;Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return s.Link}});var i=N;Object.defineProperty(t,"Strong",{enumerable:!0,get:function(){return i.Strong}}),t.marks=[E.Link,N.Strong,I.CodeInline,L.Em]})),C=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Paragraph=void 0;class r extends x.Node{constructor(){super(...arguments),this.name="paragraph",this.schema={content:"inline*",group:"block",parseDOM:[{tag:"p"}],toDOM:()=>["p",{class:"paragraph"},0]},this.parser={block:this.name},this.serializer=(e,t)=>{e.renderInline(t).closeBlock(t)},this.inputRules=()=>[],this.keymap=()=>({})}}t.Paragraph=r})),D=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Blockquote=void 0;class r extends x.Node{constructor(){super(...arguments),this.name="blockquote",this.schema={content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:()=>["blockquote",{class:"blockquote"},0]},this.parser={block:this.name},this.serializer=(e,t)=>{e.wrapBlock("> ",t,(()=>e.renderContent(t)))},this.inputRules=e=>[c.wrappingInputRule(/^\s*>\s$/,e)],this.keymap=()=>({})}}t.Blockquote=r})),$=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Heading=void 0;const r=Array(5).fill(0).map(((e,t)=>t+1));class n extends x.Node{constructor(){super(...arguments),this.name="heading",this.schema={content:"text*",group:"block",attrs:{level:{default:1}},parseDOM:r.map((e=>({tag:`h${e}`,attrs:{level:e}}))),toDOM:e=>[`h${e.attrs.level}`,{class:`heading h${e.attrs.level}`},0]},this.parser={block:this.name,getAttrs:e=>({level:Number(e.tag.slice(1))})},this.serializer=(e,t)=>{e.write(`${e.utils.repeat("#",t.attrs.level)} `),e.renderInline(t),e.closeBlock(t)},this.inputRules=e=>r.map((t=>c.textblockTypeInputRule(new RegExp(`^(#{1,${t}})\\s$`),e,(()=>({level:t}))))),this.keymap=()=>({})}}t.Heading=n})),H=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Image=void 0;class r extends x.Node{constructor(){super(...arguments),this.name="image",this.schema={inline:!0,attrs:{src:{},alt:{default:null},title:{default:null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:e=>({src:e.getAttribute("src"),alt:e.getAttribute("alt"),title:e.getAttribute("title")})}],toDOM:e=>["img",i(i({},e.attrs),{class:"image"})]},this.parser={node:"image",getAttrs:e=>{var t,r;return{src:e.attrGet("src"),alt:(null==(r=null==(t=e.children)?void 0:t[0])?void 0:r.content)||null,title:e.attrGet("title")}}},this.serializer=(e,t)=>{const r=e.utils.escape(t.attrs.alt||""),n=t.attrs.title?" "+e.utils.quote(t.attrs.title):"",s=e.utils.escape(t.attrs.src)+n;e.write(`![${r}](${s}) `)},this.inputRules=e=>[new c.InputRule(/!\[(?<alt>.*?)]\((?<filename>.*?)(?=“|\))"?(?<title>[^"]+)?"?\)/,((t,r,n,s)=>{const[i,o,a,l]=r,{tr:c}=t;return i&&c.replaceWith(n,s,e.create({src:a,alt:o,title:l})),c}))],this.keymap=()=>({})}}t.Image=r})),T=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Hr=void 0;class r extends x.Node{constructor(){super(...arguments),this.name="hr",this.schema={group:"block",parseDOM:[{tag:"hr"}],toDOM:()=>["hr",{class:"hr"}]},this.parser={block:this.name},this.serializer=(e,t)=>{e.write("---"),e.closeBlock(t)},this.inputRules=e=>[new c.InputRule(/^(?:---|___\s|\*\*\*\s)$/,((t,r,n,s)=>{const{tr:i}=t;return r[0]&&i.replaceWith(n,s,e.create({})),i}))],this.keymap=()=>({})}}t.Hr=r})),z=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.BulletList=void 0;class r extends x.Node{constructor(){super(...arguments),this.name="bullet_list",this.schema={content:"list_item+",group:"block",parseDOM:[{tag:"ul"}],toDOM:()=>["ul",{class:"bullet-list"},0]},this.parser={block:this.name},this.serializer=(e,t)=>{e.renderList(t,"  ",(()=>"* "))},this.inputRules=e=>[c.wrappingInputRule(/^\s*([-+*])\s$/,e)],this.keymap=()=>({})}}t.BulletList=r})),A=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ListItem=void 0;class r extends x.Node{constructor(){super(...arguments),this.name="list_item",this.schema={content:"paragraph block*",defining:!0,parseDOM:[{tag:"li"}],toDOM:()=>["li",{class:"list-item"},0]},this.parser={block:this.name},this.serializer=(e,t)=>{e.renderContent(t)},this.inputRules=()=>[],this.keymap=()=>({})}}t.ListItem=r})),q=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.OrderedList=void 0;class r extends x.Node{constructor(){super(...arguments),this.name="ordered_list",this.schema={content:"list_item+",group:"block",attrs:{order:{default:1}},parseDOM:[{tag:"ol",getAttrs:e=>({order:e.hasAttribute("start")?Number(e.getAttribute("start")):1})}],toDOM:e=>["ol",i(i({},1===e.attrs.order?{}:e.attrs.order),{class:"ordered-list"}),0]},this.parser={block:this.name},this.serializer=(e,t)=>{const{order:r=1}=t.attrs,n=(""+(r+t.childCount-1)).length,s=e.utils.repeat(" ",n+2);e.renderList(t,s,(t=>{const s=`${r+t}`;return e.utils.repeat(" ",n-s.length)+s+". "}))},this.inputRules=e=>[c.wrappingInputRule(/^(\d+)\.\s$/,e,(e=>({order:Number(e[1])})),((e,t)=>t.childCount+t.attrs.order===Number(e[1])))],this.keymap=()=>({})}}t.OrderedList=r})),F=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.HardBreak=void 0;class r extends x.Node{constructor(){super(...arguments),this.name="hardbreak",this.schema={inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:()=>["br",{class:"bard-break"}]},this.parser={block:this.name},this.serializer=e=>{e.write("  \n")},this.inputRules=()=>[],this.keymap=e=>({"Shift-Enter":(t,r)=>(null==r||r(t.tr.replaceSelectionWith(e.create()).scrollIntoView()),!0)})}}t.HardBreak=r})),W=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CodeFence=void 0;const r=["","javascript","typescript","bash","sql","json","c","cpp","java","ruby","python","go","rust"];class n extends x.Node{constructor(){super(...arguments),this.name="fence",this.schema={content:"text*",group:"block",marks:"",defining:!0,code:!0,attrs:{language:{default:""}},parseDOM:[{tag:"pre",preserveWhitespace:"full",getAttrs:e=>({language:e.dataset.language})}],toDOM:e=>{const t=this.createSelectElement(e.attrs.language);return["div",{"data-language":e.attrs.language,class:"code-fence"},["div",{contentEditable:"false"},t],["pre",["code",{spellCheck:"false"},0]]]}},this.parser={block:this.name,getAttrs:e=>({language:e.info})},this.serializer=(e,t)=>{e.write("```"+t.attrs.language+"\n"),e.text(t.textContent),e.ensureNewLine(),e.write("```"),e.closeBlock(t)},this.inputRules=e=>[c.textblockTypeInputRule(/^```$/,e)],this.keymap=()=>({})}onChangeLanguage(e,t,r){const{view:n}=this.editor,s=n.posAtCoords({top:e,left:t});if(!s)return;const i=n.state.tr.setNodeMarkup(s.inside,void 0,{language:r});n.dispatch(i)}createSelectElement(e){const t=document.createElement("select");return t.className="code-fence_select",t.addEventListener("change",(e=>{if(this.editor.loadState!==V.LoadState.Complete)throw new Error("Should not trigger event before milkdown ready.");const t=e.target;if(!t)return;const{top:r,left:n}=t.getBoundingClientRect();this.onChangeLanguage(r,n,t.value)})),r.forEach((r=>{const n=document.createElement("option");n.className="code-fence_select-option",n.value=r,n.innerText=r||"--",n.selected=e===r,t.appendChild(n)})),t}}t.CodeFence=n})),U=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.nodes=t.CodeFence=t.HardBreak=t.OrderedList=t.ListItem=t.BulletList=t.Hr=t.Image=t.Heading=t.Blockquote=t.Paragraph=void 0;var r=C;Object.defineProperty(t,"Paragraph",{enumerable:!0,get:function(){return r.Paragraph}});var n=D;Object.defineProperty(t,"Blockquote",{enumerable:!0,get:function(){return n.Blockquote}});var s=$;Object.defineProperty(t,"Heading",{enumerable:!0,get:function(){return s.Heading}});var i=H;Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return i.Image}});var o=T;Object.defineProperty(t,"Hr",{enumerable:!0,get:function(){return o.Hr}});var a=z;Object.defineProperty(t,"BulletList",{enumerable:!0,get:function(){return a.BulletList}});var l=A;Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return l.ListItem}});var c=q;Object.defineProperty(t,"OrderedList",{enumerable:!0,get:function(){return c.OrderedList}});var u=F;Object.defineProperty(t,"HardBreak",{enumerable:!0,get:function(){return u.HardBreak}});var d=W;Object.defineProperty(t,"CodeFence",{enumerable:!0,get:function(){return d.CodeFence}}),t.nodes=[C.Paragraph,F.HardBreak,D.Blockquote,W.CodeFence,q.OrderedList,z.BulletList,A.ListItem,$.Heading,T.Hr,H.Image]})),G=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.buildObject=void 0,t.buildObject=function(e,t,r={}){return e.reduce(((e,r)=>{const[n,s]=t(r);return i(i({},e),{[n]:s})}),r)}})),V=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Editor=t.LoadState=void 0;const r=l.__importDefault(u);var n,s;(s=n=t.LoadState||(t.LoadState={}))[s.Idle=0]="Idle",s[s.Complete=1]="Complete";t.Editor=class{constructor({root:e,defaultValue:t="",markdownIt:s=new r.default("commonmark"),onChange:i,getNodes:o,getMarks:a,plugins:l=[]}){var c,u;this.loadState=n.Idle,this.markdownIt=s,this.onChange=i,this.root=e,this.nodes=(null!=(c=null==o?void 0:o(U.nodes))?c:U.nodes).map((e=>new e(this))),this.marks=(null!=(u=null==a?void 0:a(R.marks))?u:R.marks).map((e=>new e(this))),this.schema=this.createSchema(),this.parser=this.createParser(),this.serializer=this.createSerializer(),this.inputRules=this.createInputRules(),this.keymap=this.createKeymap(),this.plugins=l,this.view=this.createView(e,t),this.loadState=n.Complete}get value(){return this.serializer(this.view.state.doc)}createSchema(){const e=G.buildObject(this.nodes,(e=>[e.name,e.schema])),t=G.buildObject(this.marks,(e=>[e.name,e.schema]));return new a.Schema({nodes:i(i({doc:{content:"block+"}},e),{text:{group:"inline"}}),marks:t})}createParser(){const e=[...this.nodes,...this.marks],t=G.buildObject(e,(e=>[e.name,e.parser]));return O.createParser(this.schema,this.markdownIt,t)}createSerializer(){const e=G.buildObject(this.nodes,(e=>[e.name,e.serializer]),{text(e,t){const{text:r}=t;r&&e.text(r)}}),t=G.buildObject(this.marks,(e=>[e.name,e.serializer]));return P.createSerializer(e,t)}createInputRules(){return[...this.nodes.reduce(((e,t)=>{const r=this.schema.nodes[t.name];return r?[...e,...t.inputRules(r,this.schema)]:e}),[]),...this.marks.reduce(((e,t)=>{const r=this.schema.marks[t.name];return r?[...e,...t.inputRules(r,this.schema)]:e}),[])]}createKeymap(){const e=this.nodes.reduce(((e,t)=>{const r=this.schema.nodes[t.name];return r?i(i({},e),t.keymap(r)):e}),{}),t=this.marks.reduce(((e,t)=>{const r=this.schema.marks[t.name];return r?i(i({},e),t.keymap(r)):e}),{});return i(i({},e),t)}createView(e,t){const r=document.createElement("div");r.className="milkdown",e.appendChild(r);const n=this.parser(t),s=d.EditorState.create({schema:this.schema,doc:n,plugins:[c.inputRules({rules:this.inputRules}),h.keymap(i(i({},p.baseKeymap),this.keymap)),...this.plugins]}),o=new m.EditorView(r,{state:s,dispatchTransaction:e=>{var t;const r=o.state.apply(e);o.updateState(r),null==(t=this.onChange)||t.call(this,(()=>this.value))}});return o.dom.setAttribute("class","editor"),o.dom.setAttribute("role","textbox"),o}}})),K=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Em=t.CodeInline=t.Strong=t.Link=t.marks=t.Image=t.Hr=t.Heading=t.ListItem=t.BulletList=t.OrderedList=t.CodeFence=t.Blockquote=t.HardBreak=t.Paragraph=t.nodes=t.Base=t.Mark=t.Node=t.LoadState=t.Editor=void 0,Object.defineProperty(t,"Editor",{enumerable:!0,get:function(){return V.Editor}}),Object.defineProperty(t,"LoadState",{enumerable:!0,get:function(){return V.LoadState}}),Object.defineProperty(t,"Node",{enumerable:!0,get:function(){return x.Node}}),Object.defineProperty(t,"Mark",{enumerable:!0,get:function(){return x.Mark}}),Object.defineProperty(t,"Base",{enumerable:!0,get:function(){return x.Base}}),Object.defineProperty(t,"nodes",{enumerable:!0,get:function(){return U.nodes}}),Object.defineProperty(t,"Paragraph",{enumerable:!0,get:function(){return U.Paragraph}}),Object.defineProperty(t,"HardBreak",{enumerable:!0,get:function(){return U.HardBreak}}),Object.defineProperty(t,"Blockquote",{enumerable:!0,get:function(){return U.Blockquote}}),Object.defineProperty(t,"CodeFence",{enumerable:!0,get:function(){return U.CodeFence}}),Object.defineProperty(t,"OrderedList",{enumerable:!0,get:function(){return U.OrderedList}}),Object.defineProperty(t,"BulletList",{enumerable:!0,get:function(){return U.BulletList}}),Object.defineProperty(t,"ListItem",{enumerable:!0,get:function(){return U.ListItem}}),Object.defineProperty(t,"Heading",{enumerable:!0,get:function(){return U.Heading}}),Object.defineProperty(t,"Hr",{enumerable:!0,get:function(){return U.Hr}}),Object.defineProperty(t,"Image",{enumerable:!0,get:function(){return U.Image}}),Object.defineProperty(t,"marks",{enumerable:!0,get:function(){return R.marks}}),Object.defineProperty(t,"Link",{enumerable:!0,get:function(){return R.Link}}),Object.defineProperty(t,"Strong",{enumerable:!0,get:function(){return R.Strong}}),Object.defineProperty(t,"CodeInline",{enumerable:!0,get:function(){return R.CodeInline}}),Object.defineProperty(t,"Em",{enumerable:!0,get:function(){return R.Em}})})),Y=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.findBlockNodes=void 0;var r;t.findBlockNodes=(r=e=>e.isBlock,(e,t)=>((e,t=!0)=>{const r=[];return e.descendants(((e,n)=>{if(r.push({node:e,pos:n}),!t)return!1})),r})(e,t).filter((e=>r(e.node))))})),J=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDecorations=void 0;const r={};t.getDecorations=function(e,t){const n=[],s=Y.findBlockNodes(e).filter((e=>e.node.type.name===t));return s.forEach((e=>{var t;let s=e.pos+1;const i=e.node.attrs.language;if(i){if(!(null==(t=r[e.pos])?void 0:t.node.eq(e.node))){const t=f.highlight(e.node.textContent,i),n=(e,t=[])=>e.flatMap((e=>"element"===e.type?n(e.children,[...t,...e.properties.className||[]]):[{text:e.value,className:t}])),o=n(t).map((({text:e,className:t})=>{const r=s,n=r+e.length;return s=n,m.Decoration.inline(r,n,{class:t.join(" ")})}));r[e.pos]={node:e.node,dec:o}}r[e.pos].dec.forEach((e=>{n.push(e)}))}})),Object.keys(r).filter((e=>!s.find((t=>t.pos===Number(e))))).forEach((e=>{delete r[Number(e)]})),m.DecorationSet.create(e,n)}})),Q=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Prism=t.key=void 0,t.key="MILKDOWN_PLUGIN_PRISM",t.Prism=function(e){let r=!1;return new d.Plugin({key:new d.PluginKey(t.key),state:{init:(e,{doc:t})=>m.DecorationSet.create(t,[]),apply:(t,n,s,i)=>{const o=i.selection.$head.parent.type.name===e,a=s.selection.$head.parent.type.name===e,l=t.docChanged&&(o||a);return!r||l?(r=!0,J.getDecorations(t.doc,e)):n.map(t.mapping,t.doc)}},view:e=>(window.requestAnimationFrame((()=>{e.dispatch(e.state.tr.setMeta(t.key,{loaded:!0}))})),{}),props:{decorations(e){return this.getState(e)}}})}})),X=o((function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Prism=void 0,Object.defineProperty(t,"Prism",{enumerable:!0,get:function(){return Q.Prism}})}));const Z=document.getElementById("app");if(!Z)throw new Error;new K.Editor({root:Z,defaultValue:"\n# Milkdown\n\n> Milkdown is a WYSIWYG markdown editor.\n\nYou can check the output markdown text in **developer tool**.\n",onChange:e=>console.log(e()),plugins:[X.Prism("fence")]});
